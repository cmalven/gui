!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).Gui=t()}(this,(function(){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e,t){return e(t={exports:{}},t.exports),t.exports}var n=function(e){return e&&e.Math==Math&&e},r=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof e&&e)||Function("return this")(),o=function(e){try{return!!e()}catch(e){return!0}},i=!o((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),a={}.propertyIsEnumerable,s=Object.getOwnPropertyDescriptor,c={f:s&&!a.call({1:2},1)?function(e){var t=s(this,e);return!!t&&t.enumerable}:a},u=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},l={}.toString,d=function(e){return l.call(e).slice(8,-1)},f="".split,h=o((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==d(e)?f.call(e,""):Object(e)}:Object,p=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e},_=function(e){return h(p(e))},m=function(e){return"object"==typeof e?null!==e:"function"==typeof e},g=function(e,t){if(!m(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!m(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!m(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!m(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")},v={}.hasOwnProperty,b=function(e,t){return v.call(e,t)},y=r.document,E=m(y)&&m(y.createElement),S=function(e){return E?y.createElement(e):{}},w=!i&&!o((function(){return 7!=Object.defineProperty(S("div"),"a",{get:function(){return 7}}).a})),x=Object.getOwnPropertyDescriptor,A={f:i?x:function(e,t){if(e=_(e),t=g(t,!0),w)try{return x(e,t)}catch(e){}if(b(e,t))return u(!c.f.call(e,t),e[t])}},C=function(e){if(!m(e))throw TypeError(String(e)+" is not an object");return e},M=Object.defineProperty,I={f:i?M:function(e,t,n){if(C(e),t=g(t,!0),C(n),w)try{return M(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},T=i?function(e,t,n){return I.f(e,t,u(1,n))}:function(e,t,n){return e[t]=n,e},N=function(e,t){try{T(r,e,t)}catch(n){r[e]=t}return t},O=r["__core-js_shared__"]||N("__core-js_shared__",{}),k=Function.toString;"function"!=typeof O.inspectSource&&(O.inspectSource=function(e){return k.call(e)});var R,D,P,L=O.inspectSource,H=r.WeakMap,G="function"==typeof H&&/native code/.test(L(H)),B=t((function(e){(e.exports=function(e,t){return O[e]||(O[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.6.5",mode:"global",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"})})),j=0,F=Math.random(),V=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++j+F).toString(36)},z=B("keys"),U=function(e){return z[e]||(z[e]=V(e))},Y={},K=r.WeakMap;if(G){var W=new K,q=W.get,X=W.has,J=W.set;R=function(e,t){return J.call(W,e,t),t},D=function(e){return q.call(W,e)||{}},P=function(e){return X.call(W,e)}}else{var $=U("state");Y[$]=!0,R=function(e,t){return T(e,$,t),t},D=function(e){return b(e,$)?e[$]:{}},P=function(e){return b(e,$)}}var Q,Z,ee={set:R,get:D,has:P,enforce:function(e){return P(e)?D(e):R(e,{})},getterFor:function(e){return function(t){var n;if(!m(t)||(n=D(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}},te=t((function(e){var t=ee.get,n=ee.enforce,o=String(String).split("String");(e.exports=function(e,t,i,a){var s=!!a&&!!a.unsafe,c=!!a&&!!a.enumerable,u=!!a&&!!a.noTargetGet;"function"==typeof i&&("string"!=typeof t||b(i,"name")||T(i,"name",t),n(i).source=o.join("string"==typeof t?t:"")),e!==r?(s?!u&&e[t]&&(c=!0):delete e[t],c?e[t]=i:T(e,t,i)):c?e[t]=i:N(t,i)})(Function.prototype,"toString",(function(){return"function"==typeof this&&t(this).source||L(this)}))})),ne=r,re=function(e){return"function"==typeof e?e:void 0},oe=function(e,t){return arguments.length<2?re(ne[e])||re(r[e]):ne[e]&&ne[e][t]||r[e]&&r[e][t]},ie=Math.ceil,ae=Math.floor,se=function(e){return isNaN(e=+e)?0:(e>0?ae:ie)(e)},ce=Math.min,ue=function(e){return e>0?ce(se(e),9007199254740991):0},le=Math.max,de=Math.min,fe=function(e,t){var n=se(e);return n<0?le(n+t,0):de(n,t)},he=function(e){return function(t,n,r){var o,i=_(t),a=ue(i.length),s=fe(r,a);if(e&&n!=n){for(;a>s;)if((o=i[s++])!=o)return!0}else for(;a>s;s++)if((e||s in i)&&i[s]===n)return e||s||0;return!e&&-1}},pe={includes:he(!0),indexOf:he(!1)},_e=pe.indexOf,me=function(e,t){var n,r=_(e),o=0,i=[];for(n in r)!b(Y,n)&&b(r,n)&&i.push(n);for(;t.length>o;)b(r,n=t[o++])&&(~_e(i,n)||i.push(n));return i},ge=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],ve=ge.concat("length","prototype"),be={f:Object.getOwnPropertyNames||function(e){return me(e,ve)}},ye={f:Object.getOwnPropertySymbols},Ee=oe("Reflect","ownKeys")||function(e){var t=be.f(C(e)),n=ye.f;return n?t.concat(n(e)):t},Se=function(e,t){for(var n=Ee(t),r=I.f,o=A.f,i=0;i<n.length;i++){var a=n[i];b(e,a)||r(e,a,o(t,a))}},we=/#|\.prototype\./,xe=function(e,t){var n=Ce[Ae(e)];return n==Ie||n!=Me&&("function"==typeof t?o(t):!!t)},Ae=xe.normalize=function(e){return String(e).replace(we,".").toLowerCase()},Ce=xe.data={},Me=xe.NATIVE="N",Ie=xe.POLYFILL="P",Te=xe,Ne=A.f,Oe=function(e,t){var n,o,i,a,s,c=e.target,u=e.global,l=e.stat;if(n=u?r:l?r[c]||N(c,{}):(r[c]||{}).prototype)for(o in t){if(a=t[o],i=e.noTargetGet?(s=Ne(n,o))&&s.value:n[o],!Te(u?o:c+(l?".":"#")+o,e.forced)&&void 0!==i){if(typeof a==typeof i)continue;Se(a,i)}(e.sham||i&&i.sham)&&T(a,"sham",!0),te(n,o,a,e)}},ke=Array.isArray||function(e){return"Array"==d(e)},Re=function(e){return Object(p(e))},De=function(e,t,n){var r=g(t);r in e?I.f(e,r,u(0,n)):e[r]=n},Pe=!!Object.getOwnPropertySymbols&&!o((function(){return!String(Symbol())})),Le=Pe&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,He=B("wks"),Ge=r.Symbol,Be=Le?Ge:Ge&&Ge.withoutSetter||V,je=function(e){return b(He,e)||(Pe&&b(Ge,e)?He[e]=Ge[e]:He[e]=Be("Symbol."+e)),He[e]},Fe=je("species"),Ve=function(e,t){var n;return ke(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!ke(n.prototype)?m(n)&&null===(n=n[Fe])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===t?0:t)},ze=oe("navigator","userAgent")||"",Ue=r.process,Ye=Ue&&Ue.versions,Ke=Ye&&Ye.v8;Ke?Z=(Q=Ke.split("."))[0]+Q[1]:ze&&(!(Q=ze.match(/Edge\/(\d+)/))||Q[1]>=74)&&(Q=ze.match(/Chrome\/(\d+)/))&&(Z=Q[1]);var We=Z&&+Z,qe=je("species"),Xe=function(e){return We>=51||!o((function(){var t=[];return(t.constructor={})[qe]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},Je=je("isConcatSpreadable"),$e=We>=51||!o((function(){var e=[];return e[Je]=!1,e.concat()[0]!==e})),Qe=Xe("concat"),Ze=function(e){if(!m(e))return!1;var t=e[Je];return void 0!==t?!!t:ke(e)};Oe({target:"Array",proto:!0,forced:!$e||!Qe},{concat:function(e){var t,n,r,o,i,a=Re(this),s=Ve(a,0),c=0;for(t=-1,r=arguments.length;t<r;t++)if(i=-1===t?a:arguments[t],Ze(i)){if(c+(o=ue(i.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(n=0;n<o;n++,c++)n in i&&De(s,c,i[n])}else{if(c>=9007199254740991)throw TypeError("Maximum allowed index exceeded");De(s,c++,i)}return s.length=c,s}});var et=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e},tt=function(e,t,n){if(et(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}},nt=[].push,rt=function(e){var t=1==e,n=2==e,r=3==e,o=4==e,i=6==e,a=5==e||i;return function(s,c,u,l){for(var d,f,p=Re(s),_=h(p),m=tt(c,u,3),g=ue(_.length),v=0,b=l||Ve,y=t?b(s,g):n?b(s,0):void 0;g>v;v++)if((a||v in _)&&(f=m(d=_[v],v,p),e))if(t)y[v]=f;else if(f)switch(e){case 3:return!0;case 5:return d;case 6:return v;case 2:nt.call(y,d)}else if(o)return!1;return i?-1:r||o?o:y}},ot={forEach:rt(0),map:rt(1),filter:rt(2),some:rt(3),every:rt(4),find:rt(5),findIndex:rt(6)},it=Object.defineProperty,at={},st=function(e){throw e},ct=function(e,t){if(b(at,e))return at[e];t||(t={});var n=[][e],r=!!b(t,"ACCESSORS")&&t.ACCESSORS,a=b(t,0)?t[0]:st,s=b(t,1)?t[1]:void 0;return at[e]=!!n&&!o((function(){if(r&&!i)return!0;var e={length:-1};r?it(e,1,{enumerable:!0,get:st}):e[1]=1,n.call(e,a,s)}))},ut=ot.filter,lt=Xe("filter"),dt=ct("filter");Oe({target:"Array",proto:!0,forced:!lt||!dt},{filter:function(e){return ut(this,e,arguments.length>1?arguments[1]:void 0)}});var ft,ht=Object.keys||function(e){return me(e,ge)},pt=i?Object.defineProperties:function(e,t){C(e);for(var n,r=ht(t),o=r.length,i=0;o>i;)I.f(e,n=r[i++],t[n]);return e},_t=oe("document","documentElement"),mt=U("IE_PROTO"),gt=function(){},vt=function(e){return"<script>"+e+"<\/script>"},bt=function(){try{ft=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,t;bt=ft?function(e){e.write(vt("")),e.close();var t=e.parentWindow.Object;return e=null,t}(ft):((t=S("iframe")).style.display="none",_t.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(vt("document.F=Object")),e.close(),e.F);for(var n=ge.length;n--;)delete bt.prototype[ge[n]];return bt()};Y[mt]=!0;var yt=Object.create||function(e,t){var n;return null!==e?(gt.prototype=C(e),n=new gt,gt.prototype=null,n[mt]=e):n=bt(),void 0===t?n:pt(n,t)},Et=je("unscopables"),St=Array.prototype;null==St[Et]&&I.f(St,Et,{configurable:!0,value:yt(null)});var wt,xt=ot.findIndex,At=!0,Ct=ct("findIndex");"findIndex"in[]&&Array(1).findIndex((function(){At=!1})),Oe({target:"Array",proto:!0,forced:At||!Ct},{findIndex:function(e){return xt(this,e,arguments.length>1?arguments[1]:void 0)}}),wt="findIndex",St[Et][wt]=!0;var Mt=function(e,t){var n=[][e];return!!n&&o((function(){n.call(null,t||function(){throw 1},1)}))},It=ot.forEach,Tt=Mt("forEach"),Nt=ct("forEach"),Ot=Tt&&Nt?[].forEach:function(e){return It(this,e,arguments.length>1?arguments[1]:void 0)};Oe({target:"Array",proto:!0,forced:[].forEach!=Ot},{forEach:Ot});var kt=pe.indexOf,Rt=[].indexOf,Dt=!!Rt&&1/[1].indexOf(1,-0)<0,Pt=Mt("indexOf"),Lt=ct("indexOf",{ACCESSORS:!0,1:0});Oe({target:"Array",proto:!0,forced:Dt||!Pt||!Lt},{indexOf:function(e){return Dt?Rt.apply(this,arguments)||0:kt(this,e,arguments.length>1?arguments[1]:void 0)}});var Ht=function(e){return function(t,n,r,o){et(n);var i=Re(t),a=h(i),s=ue(i.length),c=e?s-1:0,u=e?-1:1;if(r<2)for(;;){if(c in a){o=a[c],c+=u;break}if(c+=u,e?c<0:s<=c)throw TypeError("Reduce of empty array with no initial value")}for(;e?c>=0:s>c;c+=u)c in a&&(o=n(o,a[c],c,i));return o}},Gt={left:Ht(!1),right:Ht(!0)}.left,Bt=Mt("reduce"),jt=ct("reduce",{1:0});Oe({target:"Array",proto:!0,forced:!Bt||!jt},{reduce:function(e){return Gt(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}});var Ft=Xe("splice"),Vt=ct("splice",{ACCESSORS:!0,0:0,1:2}),zt=Math.max,Ut=Math.min;Oe({target:"Array",proto:!0,forced:!Ft||!Vt},{splice:function(e,t){var n,r,o,i,a,s,c=Re(this),u=ue(c.length),l=fe(e,u),d=arguments.length;if(0===d?n=r=0:1===d?(n=0,r=u-l):(n=d-2,r=Ut(zt(se(t),0),u-l)),u+n-r>9007199254740991)throw TypeError("Maximum allowed length exceeded");for(o=Ve(c,r),i=0;i<r;i++)(a=l+i)in c&&De(o,i,c[a]);if(o.length=r,n<r){for(i=l;i<u-r;i++)s=i+n,(a=i+r)in c?c[s]=c[a]:delete c[s];for(i=u;i>u-r+n;i--)delete c[i-1]}else if(n>r)for(i=u-r;i>l;i--)s=i+n-1,(a=i+r-1)in c?c[s]=c[a]:delete c[s];for(i=0;i<n;i++)c[i+l]=arguments[i+2];return c.length=u-r+n,o}});var Yt=I.f,Kt=Function.prototype,Wt=Kt.toString,qt=/^\s*function ([^ (]*)/;i&&!("name"in Kt)&&Yt(Kt,"name",{configurable:!0,get:function(){try{return Wt.call(this).match(qt)[1]}catch(e){return""}}});var Xt="".repeat||function(e){var t=String(p(this)),n="",r=se(e);if(r<0||r==1/0)throw RangeError("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(t+=t))1&r&&(n+=t);return n},Jt=1..toFixed,$t=Math.floor,Qt=function(e,t,n){return 0===t?n:t%2==1?Qt(e,t-1,n*e):Qt(e*e,t/2,n)};Oe({target:"Number",proto:!0,forced:Jt&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!o((function(){Jt.call({})}))},{toFixed:function(e){var t,n,r,o,i=function(e){if("number"!=typeof e&&"Number"!=d(e))throw TypeError("Incorrect invocation");return+e}(this),a=se(e),s=[0,0,0,0,0,0],c="",u="0",l=function(e,t){for(var n=-1,r=t;++n<6;)r+=e*s[n],s[n]=r%1e7,r=$t(r/1e7)},f=function(e){for(var t=6,n=0;--t>=0;)n+=s[t],s[t]=$t(n/e),n=n%e*1e7},h=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==s[e]){var n=String(s[e]);t=""===t?n:t+Xt.call("0",7-n.length)+n}return t};if(a<0||a>20)throw RangeError("Incorrect fraction digits");if(i!=i)return"NaN";if(i<=-1e21||i>=1e21)return String(i);if(i<0&&(c="-",i=-i),i>1e-21)if(n=(t=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}(i*Qt(2,69,1))-69)<0?i*Qt(2,-t,1):i/Qt(2,t,1),n*=4503599627370496,(t=52-t)>0){for(l(0,n),r=a;r>=7;)l(1e7,0),r-=7;for(l(Qt(10,r,1),0),r=t-1;r>=23;)f(1<<23),r-=23;f(1<<r),l(1,1),f(2),u=h()}else l(0,n),l(1<<-t,0),u=h()+Xt.call("0",a);return u=a>0?c+((o=u.length)<=a?"0."+Xt.call("0",a-o)+u:u.slice(0,o-a)+"."+u.slice(o-a)):c+u}});var Zt=Object.assign,en=Object.defineProperty,tn=!Zt||o((function(){if(i&&1!==Zt({b:1},Zt(en({},"a",{enumerable:!0,get:function(){en(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol();return e[n]=7,"abcdefghijklmnopqrst".split("").forEach((function(e){t[e]=e})),7!=Zt({},e)[n]||"abcdefghijklmnopqrst"!=ht(Zt({},t)).join("")}))?function(e,t){for(var n=Re(e),r=arguments.length,o=1,a=ye.f,s=c.f;r>o;)for(var u,l=h(arguments[o++]),d=a?ht(l).concat(a(l)):ht(l),f=d.length,p=0;f>p;)u=d[p++],i&&!s.call(l,u)||(n[u]=l[u]);return n}:Zt;Oe({target:"Object",stat:!0,forced:Object.assign!==tn},{assign:tn});var nn={};nn[je("toStringTag")]="z";var rn="[object z]"===String(nn),on=je("toStringTag"),an="Arguments"==d(function(){return arguments}()),sn=rn?d:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),on))?n:an?d(t):"Object"==(r=d(t))&&"function"==typeof t.callee?"Arguments":r},cn=rn?{}.toString:function(){return"[object "+sn(this)+"]"};rn||te(Object.prototype,"toString",cn,{unsafe:!0});var un=r.Promise,ln=I.f,dn=je("toStringTag"),fn=je("species"),hn={},pn=je("iterator"),_n=Array.prototype,mn=je("iterator"),gn=function(e,t,n,r){try{return r?t(C(n)[0],n[1]):t(n)}catch(t){var o=e.return;throw void 0!==o&&C(o.call(e)),t}},vn=t((function(e){var t=function(e,t){this.stopped=e,this.result=t};(e.exports=function(e,n,r,o,i){var a,s,c,u,l,d,f,h,p=tt(n,r,o?2:1);if(i)a=e;else{if("function"!=typeof(s=function(e){if(null!=e)return e[mn]||e["@@iterator"]||hn[sn(e)]}(e)))throw TypeError("Target is not iterable");if(void 0!==(h=s)&&(hn.Array===h||_n[pn]===h)){for(c=0,u=ue(e.length);u>c;c++)if((l=o?p(C(f=e[c])[0],f[1]):p(e[c]))&&l instanceof t)return l;return new t(!1)}a=s.call(e)}for(d=a.next;!(f=d.call(a)).done;)if("object"==typeof(l=gn(a,p,f.value,o))&&l&&l instanceof t)return l;return new t(!1)}).stop=function(e){return new t(!0,e)}})),bn=je("iterator"),yn=!1;try{var En=0,Sn={next:function(){return{done:!!En++}},return:function(){yn=!0}};Sn[bn]=function(){return this},Array.from(Sn,(function(){throw 2}))}catch(e){}var wn,xn,An,Cn=je("species"),Mn=/(iphone|ipod|ipad).*applewebkit/i.test(ze),In=r.location,Tn=r.setImmediate,Nn=r.clearImmediate,On=r.process,kn=r.MessageChannel,Rn=r.Dispatch,Dn=0,Pn={},Ln=function(e){if(Pn.hasOwnProperty(e)){var t=Pn[e];delete Pn[e],t()}},Hn=function(e){return function(){Ln(e)}},Gn=function(e){Ln(e.data)},Bn=function(e){r.postMessage(e+"",In.protocol+"//"+In.host)};Tn&&Nn||(Tn=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return Pn[++Dn]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},wn(Dn),Dn},Nn=function(e){delete Pn[e]},"process"==d(On)?wn=function(e){On.nextTick(Hn(e))}:Rn&&Rn.now?wn=function(e){Rn.now(Hn(e))}:kn&&!Mn?(An=(xn=new kn).port2,xn.port1.onmessage=Gn,wn=tt(An.postMessage,An,1)):!r.addEventListener||"function"!=typeof postMessage||r.importScripts||o(Bn)||"file:"===In.protocol?wn="onreadystatechange"in S("script")?function(e){_t.appendChild(S("script")).onreadystatechange=function(){_t.removeChild(this),Ln(e)}}:function(e){setTimeout(Hn(e),0)}:(wn=Bn,r.addEventListener("message",Gn,!1)));var jn,Fn,Vn,zn,Un,Yn,Kn,Wn,qn={set:Tn,clear:Nn},Xn=A.f,Jn=qn.set,$n=r.MutationObserver||r.WebKitMutationObserver,Qn=r.process,Zn=r.Promise,er="process"==d(Qn),tr=Xn(r,"queueMicrotask"),nr=tr&&tr.value;nr||(jn=function(){var e,t;for(er&&(e=Qn.domain)&&e.exit();Fn;){t=Fn.fn,Fn=Fn.next;try{t()}catch(e){throw Fn?zn():Vn=void 0,e}}Vn=void 0,e&&e.enter()},er?zn=function(){Qn.nextTick(jn)}:$n&&!Mn?(Un=!0,Yn=document.createTextNode(""),new $n(jn).observe(Yn,{characterData:!0}),zn=function(){Yn.data=Un=!Un}):Zn&&Zn.resolve?(Kn=Zn.resolve(void 0),Wn=Kn.then,zn=function(){Wn.call(Kn,jn)}):zn=function(){Jn.call(r,jn)});var rr,or,ir,ar,sr,cr,ur,lr=nr||function(e){var t={fn:e,next:void 0};Vn&&(Vn.next=t),Fn||(Fn=t,zn()),Vn=t},dr=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=et(t),this.reject=et(n)},fr={f:function(e){return new dr(e)}},hr=function(e,t){if(C(e),m(t)&&t.constructor===e)return t;var n=fr.f(e);return(0,n.resolve)(t),n.promise},pr=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},_r=qn.set,mr=je("species"),gr="Promise",vr=ee.get,br=ee.set,yr=ee.getterFor(gr),Er=un,Sr=r.TypeError,wr=r.document,xr=r.process,Ar=oe("fetch"),Cr=fr.f,Mr=Cr,Ir="process"==d(xr),Tr=!!(wr&&wr.createEvent&&r.dispatchEvent),Nr=Te(gr,(function(){if(!(L(Er)!==String(Er))){if(66===We)return!0;if(!Ir&&"function"!=typeof PromiseRejectionEvent)return!0}if(We>=51&&/native code/.test(Er))return!1;var e=Er.resolve(1),t=function(e){e((function(){}),(function(){}))};return(e.constructor={})[mr]=t,!(e.then((function(){}))instanceof t)})),Or=Nr||!function(e,t){if(!t&&!yn)return!1;var n=!1;try{var r={};r[bn]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(e){}return n}((function(e){Er.all(e).catch((function(){}))})),kr=function(e){var t;return!(!m(e)||"function"!=typeof(t=e.then))&&t},Rr=function(e,t,n){if(!t.notified){t.notified=!0;var r=t.reactions;lr((function(){for(var o=t.value,i=1==t.state,a=0;r.length>a;){var s,c,u,l=r[a++],d=i?l.ok:l.fail,f=l.resolve,h=l.reject,p=l.domain;try{d?(i||(2===t.rejection&&Hr(e,t),t.rejection=1),!0===d?s=o:(p&&p.enter(),s=d(o),p&&(p.exit(),u=!0)),s===l.promise?h(Sr("Promise-chain cycle")):(c=kr(s))?c.call(s,f,h):f(s)):h(o)}catch(e){p&&!u&&p.exit(),h(e)}}t.reactions=[],t.notified=!1,n&&!t.rejection&&Pr(e,t)}))}},Dr=function(e,t,n){var o,i;Tr?((o=wr.createEvent("Event")).promise=t,o.reason=n,o.initEvent(e,!1,!0),r.dispatchEvent(o)):o={promise:t,reason:n},(i=r["on"+e])?i(o):"unhandledrejection"===e&&function(e,t){var n=r.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}("Unhandled promise rejection",n)},Pr=function(e,t){_r.call(r,(function(){var n,r=t.value;if(Lr(t)&&(n=pr((function(){Ir?xr.emit("unhandledRejection",r,e):Dr("unhandledrejection",e,r)})),t.rejection=Ir||Lr(t)?2:1,n.error))throw n.value}))},Lr=function(e){return 1!==e.rejection&&!e.parent},Hr=function(e,t){_r.call(r,(function(){Ir?xr.emit("rejectionHandled",e):Dr("rejectionhandled",e,t.value)}))},Gr=function(e,t,n,r){return function(o){e(t,n,o,r)}},Br=function(e,t,n,r){t.done||(t.done=!0,r&&(t=r),t.value=n,t.state=2,Rr(e,t,!0))},jr=function(e,t,n,r){if(!t.done){t.done=!0,r&&(t=r);try{if(e===n)throw Sr("Promise can't be resolved itself");var o=kr(n);o?lr((function(){var r={done:!1};try{o.call(n,Gr(jr,e,r,t),Gr(Br,e,r,t))}catch(n){Br(e,r,n,t)}})):(t.value=n,t.state=1,Rr(e,t,!1))}catch(n){Br(e,{done:!1},n,t)}}};Nr&&(Er=function(e){!function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation")}(this,Er,gr),et(e),rr.call(this);var t=vr(this);try{e(Gr(jr,this,t),Gr(Br,this,t))}catch(e){Br(this,t,e)}},(rr=function(e){br(this,{type:gr,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=function(e,t,n){for(var r in t)te(e,r,t[r],n);return e}(Er.prototype,{then:function(e,t){var n,r,o,i=yr(this),a=Cr((n=Er,void 0===(o=C(this).constructor)||null==(r=C(o)[Cn])?n:et(r)));return a.ok="function"!=typeof e||e,a.fail="function"==typeof t&&t,a.domain=Ir?xr.domain:void 0,i.parent=!0,i.reactions.push(a),0!=i.state&&Rr(this,i,!1),a.promise},catch:function(e){return this.then(void 0,e)}}),or=function(){var e=new rr,t=vr(e);this.promise=e,this.resolve=Gr(jr,e,t),this.reject=Gr(Br,e,t)},fr.f=Cr=function(e){return e===Er||e===ir?new or(e):Mr(e)},"function"==typeof un&&(ar=un.prototype.then,te(un.prototype,"then",(function(e,t){var n=this;return new Er((function(e,t){ar.call(n,e,t)})).then(e,t)}),{unsafe:!0}),"function"==typeof Ar&&Oe({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return hr(Er,Ar.apply(r,arguments))}}))),Oe({global:!0,wrap:!0,forced:Nr},{Promise:Er}),cr=gr,ur=!1,(sr=Er)&&!b(sr=ur?sr:sr.prototype,dn)&&ln(sr,dn,{configurable:!0,value:cr}),function(e){var t=oe(e),n=I.f;i&&t&&!t[fn]&&n(t,fn,{configurable:!0,get:function(){return this}})}(gr),ir=oe(gr),Oe({target:gr,stat:!0,forced:Nr},{reject:function(e){var t=Cr(this);return t.reject.call(void 0,e),t.promise}}),Oe({target:gr,stat:!0,forced:Nr},{resolve:function(e){return hr(this,e)}}),Oe({target:gr,stat:!0,forced:Or},{all:function(e){var t=this,n=Cr(t),r=n.resolve,o=n.reject,i=pr((function(){var n=et(t.resolve),i=[],a=0,s=1;vn(e,(function(e){var c=a++,u=!1;i.push(void 0),s++,n.call(t,e).then((function(e){u||(u=!0,i[c]=e,--s||r(i))}),o)})),--s||r(i)}));return i.error&&o(i.value),n.promise},race:function(e){var t=this,n=Cr(t),r=n.reject,o=pr((function(){var o=et(t.resolve);vn(e,(function(e){o.call(t,e).then(n.resolve,r)}))}));return o.error&&r(o.value),n.promise}});var Fr=function(){var e=C(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t};function Vr(e,t){return RegExp(e,t)}var zr,Ur,Yr={UNSUPPORTED_Y:o((function(){var e=Vr("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),BROKEN_CARET:o((function(){var e=Vr("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},Kr=RegExp.prototype.exec,Wr=String.prototype.replace,qr=Kr,Xr=(zr=/a/,Ur=/b*/g,Kr.call(zr,"a"),Kr.call(Ur,"a"),0!==zr.lastIndex||0!==Ur.lastIndex),Jr=Yr.UNSUPPORTED_Y||Yr.BROKEN_CARET,$r=void 0!==/()??/.exec("")[1];(Xr||$r||Jr)&&(qr=function(e){var t,n,r,o,i=this,a=Jr&&i.sticky,s=Fr.call(i),c=i.source,u=0,l=e;return a&&(-1===(s=s.replace("y","")).indexOf("g")&&(s+="g"),l=String(e).slice(i.lastIndex),i.lastIndex>0&&(!i.multiline||i.multiline&&"\n"!==e[i.lastIndex-1])&&(c="(?: "+c+")",l=" "+l,u++),n=new RegExp("^(?:"+c+")",s)),$r&&(n=new RegExp("^"+c+"$(?!\\s)",s)),Xr&&(t=i.lastIndex),r=Kr.call(a?n:i,l),a?r?(r.input=r.input.slice(u),r[0]=r[0].slice(u),r.index=i.lastIndex,i.lastIndex+=r[0].length):i.lastIndex=0:Xr&&r&&(i.lastIndex=i.global?r.index+r[0].length:t),$r&&r&&r.length>1&&Wr.call(r[0],n,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(r[o]=void 0)})),r});var Qr=qr;Oe({target:"RegExp",proto:!0,forced:/./.exec!==Qr},{exec:Qr});var Zr=je("species"),eo=!o((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),to="$0"==="a".replace(/./,"$0"),no=je("replace"),ro=!!/./[no]&&""===/./[no]("a","$0"),oo=!o((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]})),io=function(e){return function(t,n){var r,o,i=String(p(t)),a=se(n),s=i.length;return a<0||a>=s?e?"":void 0:(r=i.charCodeAt(a))<55296||r>56319||a+1===s||(o=i.charCodeAt(a+1))<56320||o>57343?e?i.charAt(a):r:e?i.slice(a,a+2):o-56320+(r-55296<<10)+65536}},ao={codeAt:io(!1),charAt:io(!0)}.charAt,so=function(e,t,n){return t+(n?ao(e,t).length:1)},co=function(e,t){var n=e.exec;if("function"==typeof n){var r=n.call(e,t);if("object"!=typeof r)throw TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==d(e))throw TypeError("RegExp#exec called on incompatible receiver");return Qr.call(e,t)},uo=Math.max,lo=Math.min,fo=Math.floor,ho=/\$([$&'`]|\d\d?|<[^>]*>)/g,po=/\$([$&'`]|\d\d?)/g,_o=function(e){return void 0===e?e:String(e)};!function(e,t,n,r){var i=je(e),a=!o((function(){var t={};return t[i]=function(){return 7},7!=""[e](t)})),s=a&&!o((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[Zr]=function(){return n},n.flags="",n[i]=/./[i]),n.exec=function(){return t=!0,null},n[i](""),!t}));if(!a||!s||"replace"===e&&(!eo||!to||ro)||"split"===e&&!oo){var c=/./[i],u=n(i,""[e],(function(e,t,n,r,o){return t.exec===Qr?a&&!o?{done:!0,value:c.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),{REPLACE_KEEPS_$0:to,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:ro}),l=u[0],d=u[1];te(String.prototype,e,l),te(RegExp.prototype,i,2==t?function(e,t){return d.call(e,this,t)}:function(e){return d.call(e,this)})}r&&T(RegExp.prototype[i],"sham",!0)}("replace",2,(function(e,t,n,r){var o=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,i=r.REPLACE_KEEPS_$0,a=o?"$":"$0";return[function(n,r){var o=p(this),i=null==n?void 0:n[e];return void 0!==i?i.call(n,o,r):t.call(String(o),n,r)},function(e,r){if(!o&&i||"string"==typeof r&&-1===r.indexOf(a)){var c=n(t,e,this,r);if(c.done)return c.value}var u=C(e),l=String(this),d="function"==typeof r;d||(r=String(r));var f=u.global;if(f){var h=u.unicode;u.lastIndex=0}for(var p=[];;){var _=co(u,l);if(null===_)break;if(p.push(_),!f)break;""===String(_[0])&&(u.lastIndex=so(l,ue(u.lastIndex),h))}for(var m="",g=0,v=0;v<p.length;v++){_=p[v];for(var b=String(_[0]),y=uo(lo(se(_.index),l.length),0),E=[],S=1;S<_.length;S++)E.push(_o(_[S]));var w=_.groups;if(d){var x=[b].concat(E,y,l);void 0!==w&&x.push(w);var A=String(r.apply(void 0,x))}else A=s(b,l,y,E,w,r);y>=g&&(m+=l.slice(g,y)+A,g=y+b.length)}return m+l.slice(g)}];function s(e,n,r,o,i,a){var s=r+e.length,c=o.length,u=po;return void 0!==i&&(i=Re(i),u=ho),t.call(a,u,(function(t,a){var u;switch(a.charAt(0)){case"$":return"$";case"&":return e;case"`":return n.slice(0,r);case"'":return n.slice(s);case"<":u=i[a.slice(1,-1)];break;default:var l=+a;if(0===l)return t;if(l>c){var d=fo(l/10);return 0===d?t:d<=c?void 0===o[d-1]?a.charAt(1):o[d-1]+a.charAt(1):t}u=o[l-1]}return void 0===u?"":u}))}}));for(var mo in{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}){var go=r[mo],vo=go&&go.prototype;if(vo&&vo.forEach!==Ot)try{T(vo,"forEach",Ot)}catch(e){vo.forEach=Ot}}function bo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return yo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yo(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Eo(e,t){var n=e.__state.conversionName.toString(),r=Math.round(e.r),o=Math.round(e.g),i=Math.round(e.b),a=e.a,s=Math.round(e.h),c=e.s.toFixed(1),u=e.v.toFixed(1);if(t||"THREE_CHAR_HEX"===n||"SIX_CHAR_HEX"===n){for(var l=e.hex.toString(16);l.length<6;)l="0"+l;return"#"+l}return"CSS_RGB"===n?"rgb("+r+","+o+","+i+")":"CSS_RGBA"===n?"rgba("+r+","+o+","+i+","+a+")":"HEX"===n?"0x"+e.hex.toString(16):"RGB_ARRAY"===n?"["+r+","+o+","+i+"]":"RGBA_ARRAY"===n?"["+r+","+o+","+i+","+a+"]":"RGB_OBJ"===n?"{r:"+r+",g:"+o+",b:"+i+"}":"RGBA_OBJ"===n?"{r:"+r+",g:"+o+",b:"+i+",a:"+a+"}":"HSV_OBJ"===n?"{h:"+s+",s:"+c+",v:"+u+"}":"HSVA_OBJ"===n?"{h:"+s+",s:"+c+",v:"+u+",a:"+a+"}":"unknown format"}var So=Array.prototype.forEach,wo=Array.prototype.slice,xo={BREAK:{},extend:function(e){return this.each(wo.call(arguments,1),(function(t){(this.isObject(t)?Object.keys(t):[]).forEach(function(n){this.isUndefined(t[n])||(e[n]=t[n])}.bind(this))}),this),e},defaults:function(e){return this.each(wo.call(arguments,1),(function(t){(this.isObject(t)?Object.keys(t):[]).forEach(function(n){this.isUndefined(e[n])&&(e[n]=t[n])}.bind(this))}),this),e},compose:function(){var e=wo.call(arguments);return function(){for(var t=wo.call(arguments),n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},each:function(e,t,n){if(e)if(So&&e.forEach&&e.forEach===So)e.forEach(t,n);else if(e.length===e.length+0){var r,o=void 0;for(o=0,r=e.length;o<r;o++)if(o in e&&t.call(n,e[o],o)===this.BREAK)return}else for(var i in e)if(t.call(n,e[i],i)===this.BREAK)return},defer:function(e){setTimeout(e,0)},debounce:function(e,t,n){var r=void 0;return function(){var o=this,i=arguments;function a(){r=null,n||e.apply(o,i)}var s=n||!r;clearTimeout(r),r=setTimeout(a,t),s&&e.apply(o,i)}},toArray:function(e){return e.toArray?e.toArray():wo.call(e)},isUndefined:function(e){return void 0===e},isNull:function(e){return null===e},isNaN:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return isNaN(e)})),isArray:Array.isArray||function(e){return e.constructor===Array},isObject:function(e){return e===Object(e)},isNumber:function(e){return e===e+0},isString:function(e){return e===e+""},isBoolean:function(e){return!1===e||!0===e},isFunction:function(e){return e instanceof Function}},Ao=[{litmus:xo.isString,conversions:{THREE_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString()+t[1].toString()+t[2].toString()+t[2].toString()+t[3].toString()+t[3].toString(),0)}},write:Eo},SIX_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9]{6})$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString(),0)}},write:Eo},CSS_RGB:{read:function(e){var t=e.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3])}},write:Eo},CSS_RGBA:{read:function(e){var t=e.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3]),a:parseFloat(t[4])}},write:Eo}}},{litmus:xo.isNumber,conversions:{HEX:{read:function(e){return{space:"HEX",hex:e,conversionName:"HEX"}},write:function(e){return e.hex}}}},{litmus:xo.isArray,conversions:{RGB_ARRAY:{read:function(e){return 3===e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2]}},write:function(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function(e){return 4===e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2],a:e[3]}},write:function(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:xo.isObject,conversions:{RGBA_OBJ:{read:function(e){return!!(xo.isNumber(e.r)&&xo.isNumber(e.g)&&xo.isNumber(e.b)&&xo.isNumber(e.a))&&{space:"RGB",r:e.r,g:e.g,b:e.b,a:e.a}},write:function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function(e){return!!(xo.isNumber(e.r)&&xo.isNumber(e.g)&&xo.isNumber(e.b))&&{space:"RGB",r:e.r,g:e.g,b:e.b}},write:function(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function(e){return!!(xo.isNumber(e.h)&&xo.isNumber(e.s)&&xo.isNumber(e.v)&&xo.isNumber(e.a))&&{space:"HSV",h:e.h,s:e.s,v:e.v,a:e.a}},write:function(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function(e){return!!(xo.isNumber(e.h)&&xo.isNumber(e.s)&&xo.isNumber(e.v))&&{space:"HSV",h:e.h,s:e.s,v:e.v}},write:function(e){return{h:e.h,s:e.s,v:e.v}}}}}],Co=void 0,Mo=void 0,Io=function(){Mo=!1;var e=arguments.length>1?xo.toArray(arguments):arguments[0];return xo.each(Ao,(function(t){if(t.litmus(e))return xo.each(t.conversions,(function(t,n){if(Co=t.read(e),!1===Mo&&!1!==Co)return Mo=Co,Co.conversionName=n,Co.conversion=t,xo.BREAK})),xo.BREAK})),Mo},To=void 0,No={hsv_to_rgb:function(e,t,n){var r=Math.floor(e/60)%6,o=e/60-Math.floor(e/60),i=n*(1-t),a=n*(1-o*t),s=n*(1-(1-o)*t),c=[[n,s,i],[a,n,i],[i,n,s],[i,a,n],[s,i,n],[n,i,a]][r];return{r:255*c[0],g:255*c[1],b:255*c[2]}},rgb_to_hsv:function(e,t,n){var r=Math.min(e,t,n),o=Math.max(e,t,n),i=o-r,a=void 0;return 0===o?{h:NaN,s:0,v:0}:(a=e===o?(t-n)/i:t===o?2+(n-e)/i:4+(e-t)/i,(a/=6)<0&&(a+=1),{h:360*a,s:i/o,v:o/255})},rgb_to_hex:function(e,t,n){var r=this.hex_with_component(0,2,e);return r=this.hex_with_component(r,1,t),r=this.hex_with_component(r,0,n)},component_from_hex:function(e,t){return e>>8*t&255},hex_with_component:function(e,t,n){return n<<(To=8*t)|e&~(255<<To)}},Oo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ko=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},Ro=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Do=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(r):void 0},Po=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},Lo=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},Ho=function(){function e(){if(ko(this,e),this.__state=Io.apply(this,arguments),!1===this.__state)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return Ro(e,[{key:"toString",value:function(){return Eo(this)}},{key:"toHexString",value:function(){return Eo(this,!0)}},{key:"toOriginal",value:function(){return this.__state.conversion.write(this)}}]),e}();function Go(e,t,n){Object.defineProperty(e,t,{get:function(){return"RGB"===this.__state.space||Ho.recalculateRGB(this,t,n),this.__state[t]},set:function(e){"RGB"!==this.__state.space&&(Ho.recalculateRGB(this,t,n),this.__state.space="RGB"),this.__state[t]=e}})}function Bo(e,t){Object.defineProperty(e,t,{get:function(){return"HSV"===this.__state.space||Ho.recalculateHSV(this),this.__state[t]},set:function(e){"HSV"!==this.__state.space&&(Ho.recalculateHSV(this),this.__state.space="HSV"),this.__state[t]=e}})}Ho.recalculateRGB=function(e,t,n){if("HEX"===e.__state.space)e.__state[t]=No.component_from_hex(e.__state.hex,n);else{if("HSV"!==e.__state.space)throw new Error("Corrupted color state");xo.extend(e.__state,No.hsv_to_rgb(e.__state.h,e.__state.s,e.__state.v))}},Ho.recalculateHSV=function(e){var t=No.rgb_to_hsv(e.r,e.g,e.b);xo.extend(e.__state,{s:t.s,v:t.v}),xo.isNaN(t.h)?xo.isUndefined(e.__state.h)&&(e.__state.h=0):e.__state.h=t.h},Ho.COMPONENTS=["r","g","b","h","s","v","hex","a"],Go(Ho.prototype,"r",2),Go(Ho.prototype,"g",1),Go(Ho.prototype,"b",0),Bo(Ho.prototype,"h"),Bo(Ho.prototype,"s"),Bo(Ho.prototype,"v"),Object.defineProperty(Ho.prototype,"a",{get:function(){return this.__state.a},set:function(e){this.__state.a=e}}),Object.defineProperty(Ho.prototype,"hex",{get:function(){return"HEX"!==this.__state.space&&(this.__state.hex=No.rgb_to_hex(this.r,this.g,this.b),this.__state.space="HEX"),this.__state.hex},set:function(e){this.__state.space="HEX",this.__state.hex=e}});var jo=function(){function e(t,n){ko(this,e),this.initialValue=t[n],this.domElement=document.createElement("div"),this.object=t,this.property=n,this.__onChange=void 0,this.__onFinishChange=void 0}return Ro(e,[{key:"onChange",value:function(e){return this.__onChange=e,this}},{key:"onFinishChange",value:function(e){return this.__onFinishChange=e,this}},{key:"setValue",value:function(e){return this.object[this.property]=e,this.__onChange&&this.__onChange.call(this,e),this.updateDisplay(),this}},{key:"getValue",value:function(){return this.object[this.property]}},{key:"updateDisplay",value:function(){return this}},{key:"isModified",value:function(){return this.initialValue!==this.getValue()}}]),e}(),Fo={};xo.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},(function(e,t){xo.each(e,(function(e){Fo[e]=t}))}));var Vo=/(\d+(\.\d+)?)px/;function zo(e){if("0"===e||xo.isUndefined(e))return 0;var t=e.match(Vo);return xo.isNull(t)?0:parseFloat(t[1])}var Uo={makeSelectable:function(e,t){void 0!==e&&void 0!==e.style&&(e.onselectstart=t?function(){return!1}:function(){},e.style.MozUserSelect=t?"auto":"none",e.style.KhtmlUserSelect=t?"auto":"none",e.unselectable=t?"on":"off")},makeFullscreen:function(e,t,n){var r=n,o=t;xo.isUndefined(o)&&(o=!0),xo.isUndefined(r)&&(r=!0),e.style.position="absolute",o&&(e.style.left=0,e.style.right=0),r&&(e.style.top=0,e.style.bottom=0)},fakeEvent:function(e,t,n,r){var o=n||{},i=Fo[t];if(!i)throw new Error("Event type "+t+" not supported.");var a=document.createEvent(i);switch(i){case"MouseEvents":var s=o.x||o.clientX||0,c=o.y||o.clientY||0;a.initMouseEvent(t,o.bubbles||!1,o.cancelable||!0,window,o.clickCount||1,0,0,s,c,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var u=a.initKeyboardEvent||a.initKeyEvent;xo.defaults(o,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),u(t,o.bubbles||!1,o.cancelable,window,o.ctrlKey,o.altKey,o.shiftKey,o.metaKey,o.keyCode,o.charCode);break;default:a.initEvent(t,o.bubbles||!1,o.cancelable||!0)}xo.defaults(a,r),e.dispatchEvent(a)},bind:function(e,t,n,r){var o=r||!1;return e.addEventListener?e.addEventListener(t,n,o):e.attachEvent&&e.attachEvent("on"+t,n),Uo},unbind:function(e,t,n,r){var o=r||!1;return e.removeEventListener?e.removeEventListener(t,n,o):e.detachEvent&&e.detachEvent("on"+t,n),Uo},addClass:function(e,t){if(void 0===e.className)e.className=t;else if(e.className!==t){var n=e.className.split(/ +/);-1===n.indexOf(t)&&(n.push(t),e.className=n.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return Uo},removeClass:function(e,t){if(t)if(e.className===t)e.removeAttribute("class");else{var n=e.className.split(/ +/),r=n.indexOf(t);-1!==r&&(n.splice(r,1),e.className=n.join(" "))}else e.className=void 0;return Uo},hasClass:function(e,t){return new RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)").test(e.className)||!1},getWidth:function(e){var t=getComputedStyle(e);return zo(t["border-left-width"])+zo(t["border-right-width"])+zo(t["padding-left"])+zo(t["padding-right"])+zo(t.width)},getHeight:function(e){var t=getComputedStyle(e);return zo(t["border-top-width"])+zo(t["border-bottom-width"])+zo(t["padding-top"])+zo(t["padding-bottom"])+zo(t.height)},getOffset:function(e){var t=e,n={left:0,top:0};if(t.offsetParent)do{n.left+=t.offsetLeft,n.top+=t.offsetTop,t=t.offsetParent}while(t);return n},isActive:function(e){return e===document.activeElement&&(e.type||e.href)}},Yo=function(e){function t(e,n){ko(this,t);var r=Lo(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),o=r;return r.__prev=r.getValue(),r.__checkbox=document.createElement("input"),r.__checkbox.setAttribute("type","checkbox"),Uo.bind(r.__checkbox,"change",(function(){o.setValue(!o.__prev)}),!1),r.domElement.appendChild(r.__checkbox),r.updateDisplay(),r}return Po(t,e),Ro(t,[{key:"setValue",value:function(e){var n=Do(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),n}},{key:"updateDisplay",value:function(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),Do(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(jo),Ko=function(e){function t(e,n,r){ko(this,t);var o=Lo(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),i=r,a=o;if(o.__select=document.createElement("select"),xo.isArray(i)){var s={};xo.each(i,(function(e){s[e]=e})),i=s}return xo.each(i,(function(e,t){var n=document.createElement("option");n.innerHTML=t,n.setAttribute("value",e),a.__select.appendChild(n)})),o.updateDisplay(),Uo.bind(o.__select,"change",(function(){var e=this.options[this.selectedIndex].value;a.setValue(e)})),o.domElement.appendChild(o.__select),o}return Po(t,e),Ro(t,[{key:"setValue",value:function(e){var n=Do(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),n}},{key:"updateDisplay",value:function(){return Uo.isActive(this.__select)?this:(this.__select.value=this.getValue(),Do(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this))}}]),t}(jo),Wo=function(e){function t(e,n){ko(this,t);var r=Lo(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),o=r;function i(){o.setValue(o.__input.value)}return r.__input=document.createElement("input"),r.__input.setAttribute("type","text"),Uo.bind(r.__input,"keyup",i),Uo.bind(r.__input,"change",i),Uo.bind(r.__input,"blur",(function(){o.__onFinishChange&&o.__onFinishChange.call(o,o.getValue())})),Uo.bind(r.__input,"keydown",(function(e){13===e.keyCode&&this.blur()})),r.updateDisplay(),r.domElement.appendChild(r.__input),r}return Po(t,e),Ro(t,[{key:"updateDisplay",value:function(){return Uo.isActive(this.__input)||(this.__input.value=this.getValue()),Do(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(jo);function qo(e){var t=e.toString();return t.indexOf(".")>-1?t.length-t.indexOf(".")-1:0}var Xo=function(e){function t(e,n,r){ko(this,t);var o=Lo(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),i=r||{};return o.__min=i.min,o.__max=i.max,o.__step=i.step,xo.isUndefined(o.__step)?0===o.initialValue?o.__impliedStep=1:o.__impliedStep=Math.pow(10,Math.floor(Math.log(Math.abs(o.initialValue))/Math.LN10))/10:o.__impliedStep=o.__step,o.__precision=qo(o.__impliedStep),o}return Po(t,e),Ro(t,[{key:"setValue",value:function(e){var n=e;return void 0!==this.__min&&n<this.__min?n=this.__min:void 0!==this.__max&&n>this.__max&&(n=this.__max),void 0!==this.__step&&n%this.__step!=0&&(n=Math.round(n/this.__step)*this.__step),Do(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,n)}},{key:"min",value:function(e){return this.__min=e,this}},{key:"max",value:function(e){return this.__max=e,this}},{key:"step",value:function(e){return this.__step=e,this.__impliedStep=e,this.__precision=qo(e),this}}]),t}(jo);var Jo=function(e){function t(e,n,r){ko(this,t);var o=Lo(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r));o.__truncationSuspended=!1;var i=o,a=void 0;function s(){i.__onFinishChange&&i.__onFinishChange.call(i,i.getValue())}function c(e){var t=a-e.clientY;i.setValue(i.getValue()+t*i.__impliedStep),a=e.clientY}function u(){Uo.unbind(window,"mousemove",c),Uo.unbind(window,"mouseup",u),s()}return o.__input=document.createElement("input"),o.__input.setAttribute("type","text"),Uo.bind(o.__input,"change",(function(){var e=parseFloat(i.__input.value);xo.isNaN(e)||i.setValue(e)})),Uo.bind(o.__input,"blur",(function(){s()})),Uo.bind(o.__input,"mousedown",(function(e){Uo.bind(window,"mousemove",c),Uo.bind(window,"mouseup",u),a=e.clientY})),Uo.bind(o.__input,"keydown",(function(e){13===e.keyCode&&(i.__truncationSuspended=!0,this.blur(),i.__truncationSuspended=!1,s())})),o.updateDisplay(),o.domElement.appendChild(o.__input),o}return Po(t,e),Ro(t,[{key:"updateDisplay",value:function(){var e,n,r;return this.__input.value=this.__truncationSuspended?this.getValue():(e=this.getValue(),n=this.__precision,r=Math.pow(10,n),Math.round(e*r)/r),Do(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(Xo);function $o(e,t,n,r,o){return r+(e-t)/(n-t)*(o-r)}var Qo=function(e){function t(e,n,r,o,i){ko(this,t);var a=Lo(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,{min:r,max:o,step:i})),s=a;function c(e){e.preventDefault();var t=s.__background.getBoundingClientRect();return s.setValue($o(e.clientX,t.left,t.right,s.__min,s.__max)),!1}function u(){Uo.unbind(window,"mousemove",c),Uo.unbind(window,"mouseup",u),s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}function l(e){var t=e.touches[0].clientX,n=s.__background.getBoundingClientRect();s.setValue($o(t,n.left,n.right,s.__min,s.__max))}function d(){Uo.unbind(window,"touchmove",l),Uo.unbind(window,"touchend",d),s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}return a.__background=document.createElement("div"),a.__foreground=document.createElement("div"),Uo.bind(a.__background,"mousedown",(function(e){document.activeElement.blur(),Uo.bind(window,"mousemove",c),Uo.bind(window,"mouseup",u),c(e)})),Uo.bind(a.__background,"touchstart",(function(e){if(1!==e.touches.length)return;Uo.bind(window,"touchmove",l),Uo.bind(window,"touchend",d),l(e)})),Uo.addClass(a.__background,"slider"),Uo.addClass(a.__foreground,"slider-fg"),a.updateDisplay(),a.__background.appendChild(a.__foreground),a.domElement.appendChild(a.__background),a}return Po(t,e),Ro(t,[{key:"updateDisplay",value:function(){var e=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*e+"%",Do(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(Xo),Zo=function(e){function t(e,n,r){ko(this,t);var o=Lo(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),i=o;return o.__button=document.createElement("div"),o.__button.innerHTML=void 0===r?"Fire":r,Uo.bind(o.__button,"click",(function(e){return e.preventDefault(),i.fire(),!1})),Uo.addClass(o.__button,"button"),o.domElement.appendChild(o.__button),o}return Po(t,e),Ro(t,[{key:"fire",value:function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}]),t}(jo),ei=function(e){function t(e,n){ko(this,t);var r=Lo(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));r.__color=new Ho(r.getValue()),r.__temp=new Ho(0);var o=r;r.domElement=document.createElement("div"),Uo.makeSelectable(r.domElement,!1),r.__selector=document.createElement("div"),r.__selector.className="selector",r.__saturation_field=document.createElement("div"),r.__saturation_field.className="saturation-field",r.__field_knob=document.createElement("div"),r.__field_knob.className="field-knob",r.__field_knob_border="2px solid ",r.__hue_knob=document.createElement("div"),r.__hue_knob.className="hue-knob",r.__hue_field=document.createElement("div"),r.__hue_field.className="hue-field",r.__input=document.createElement("input"),r.__input.type="text",r.__input_textShadow="0 1px 1px ",Uo.bind(r.__input,"keydown",(function(e){13===e.keyCode&&d.call(this)})),Uo.bind(r.__input,"blur",d),Uo.bind(r.__selector,"mousedown",(function(){Uo.addClass(this,"drag").bind(window,"mouseup",(function(){Uo.removeClass(o.__selector,"drag")}))})),Uo.bind(r.__selector,"touchstart",(function(){Uo.addClass(this,"drag").bind(window,"touchend",(function(){Uo.removeClass(o.__selector,"drag")}))}));var i,a=document.createElement("div");function s(e){h(e),Uo.bind(window,"mousemove",h),Uo.bind(window,"touchmove",h),Uo.bind(window,"mouseup",u),Uo.bind(window,"touchend",u)}function c(e){p(e),Uo.bind(window,"mousemove",p),Uo.bind(window,"touchmove",p),Uo.bind(window,"mouseup",l),Uo.bind(window,"touchend",l)}function u(){Uo.unbind(window,"mousemove",h),Uo.unbind(window,"touchmove",h),Uo.unbind(window,"mouseup",u),Uo.unbind(window,"touchend",u),f()}function l(){Uo.unbind(window,"mousemove",p),Uo.unbind(window,"touchmove",p),Uo.unbind(window,"mouseup",l),Uo.unbind(window,"touchend",l),f()}function d(){var e=Io(this.value);!1!==e?(o.__color.__state=e,o.setValue(o.__color.toOriginal())):this.value=o.__color.toString()}function f(){o.__onFinishChange&&o.__onFinishChange.call(o,o.__color.toOriginal())}function h(e){-1===e.type.indexOf("touch")&&e.preventDefault();var t=o.__saturation_field.getBoundingClientRect(),n=e.touches&&e.touches[0]||e,r=n.clientX,i=n.clientY,a=(r-t.left)/(t.right-t.left),s=1-(i-t.top)/(t.bottom-t.top);return s>1?s=1:s<0&&(s=0),a>1?a=1:a<0&&(a=0),o.__color.v=s,o.__color.s=a,o.setValue(o.__color.toOriginal()),!1}function p(e){-1===e.type.indexOf("touch")&&e.preventDefault();var t=o.__hue_field.getBoundingClientRect(),n=1-((e.touches&&e.touches[0]||e).clientY-t.top)/(t.bottom-t.top);return n>1?n=1:n<0&&(n=0),o.__color.h=360*n,o.setValue(o.__color.toOriginal()),!1}return xo.extend(r.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),xo.extend(r.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:r.__field_knob_border+(r.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),xo.extend(r.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),xo.extend(r.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),xo.extend(a.style,{width:"100%",height:"100%",background:"none"}),ni(a,"top","rgba(0,0,0,0)","#000"),xo.extend(r.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),(i=r.__hue_field).style.background="",i.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",i.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",i.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",i.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",i.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",xo.extend(r.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:r.__input_textShadow+"rgba(0,0,0,0.7)"}),Uo.bind(r.__saturation_field,"mousedown",s),Uo.bind(r.__saturation_field,"touchstart",s),Uo.bind(r.__field_knob,"mousedown",s),Uo.bind(r.__field_knob,"touchstart",s),Uo.bind(r.__hue_field,"mousedown",c),Uo.bind(r.__hue_field,"touchstart",c),r.__saturation_field.appendChild(a),r.__selector.appendChild(r.__field_knob),r.__selector.appendChild(r.__saturation_field),r.__selector.appendChild(r.__hue_field),r.__hue_field.appendChild(r.__hue_knob),r.domElement.appendChild(r.__input),r.domElement.appendChild(r.__selector),r.updateDisplay(),r}return Po(t,e),Ro(t,[{key:"updateDisplay",value:function(){var e=Io(this.getValue());if(!1!==e){var t=!1;xo.each(Ho.COMPONENTS,(function(n){if(!xo.isUndefined(e[n])&&!xo.isUndefined(this.__color.__state[n])&&e[n]!==this.__color.__state[n])return t=!0,{}}),this),t&&xo.extend(this.__color.__state,e)}xo.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var n=this.__color.v<.5||this.__color.s>.5?255:0,r=255-n;xo.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+n+","+n+","+n+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,ni(this.__saturation_field,"left","#fff",this.__temp.toHexString()),this.__input.value=this.__color.toString(),xo.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+n+","+n+","+n+")",textShadow:this.__input_textShadow+"rgba("+r+","+r+","+r+",.7)"})}}]),t}(jo),ti=["-moz-","-o-","-webkit-","-ms-",""];function ni(e,t,n,r){e.style.background="",xo.each(ti,(function(o){e.style.cssText+="background: "+o+"linear-gradient("+t+", "+n+" 0%, "+r+" 100%); "}))}var ri=function(e,t){var n=t||document,r=document.createElement("style");r.type="text/css",r.innerHTML=e;var o=n.getElementsByTagName("head")[0];try{o.appendChild(r)}catch(e){}},oi='<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n\n    </div>\n\n  </div>\n\n</div>',ii=function(e,t){var n=e[t];return xo.isArray(arguments[2])||xo.isObject(arguments[2])?new Ko(e,t,arguments[2]):xo.isNumber(n)?xo.isNumber(arguments[2])&&xo.isNumber(arguments[3])?xo.isNumber(arguments[4])?new Qo(e,t,arguments[2],arguments[3],arguments[4]):new Qo(e,t,arguments[2],arguments[3]):xo.isNumber(arguments[4])?new Jo(e,t,{min:arguments[2],max:arguments[3],step:arguments[4]}):new Jo(e,t,{min:arguments[2],max:arguments[3]}):xo.isString(n)?new Wo(e,t):xo.isFunction(n)?new Zo(e,t,""):xo.isBoolean(n)?new Yo(e,t):null};var ai=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,1e3/60)},si=function(){function e(){ko(this,e),this.backgroundElement=document.createElement("div"),xo.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),Uo.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),xo.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var t=this;Uo.bind(this.backgroundElement,"click",(function(){t.hide()}))}return Ro(e,[{key:"show",value:function(){var e=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),xo.defer((function(){e.backgroundElement.style.opacity=1,e.domElement.style.opacity=1,e.domElement.style.webkitTransform="scale(1)"}))}},{key:"hide",value:function(){var e=this,t=function t(){e.domElement.style.display="none",e.backgroundElement.style.display="none",Uo.unbind(e.domElement,"webkitTransitionEnd",t),Uo.unbind(e.domElement,"transitionend",t),Uo.unbind(e.domElement,"oTransitionEnd",t)};Uo.bind(this.domElement,"webkitTransitionEnd",t),Uo.bind(this.domElement,"transitionend",t),Uo.bind(this.domElement,"oTransitionEnd",t),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"}},{key:"layout",value:function(){this.domElement.style.left=window.innerWidth/2-Uo.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-Uo.getHeight(this.domElement)/2+"px"}}]),e}();ri(function(e){if(e&&"undefined"!=typeof window){var t=document.createElement("style");return t.setAttribute("type","text/css"),t.innerHTML=e,document.head.appendChild(t),e}}(".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n"));var ci=function(){try{return!!window.localStorage}catch(e){return!1}}(),ui=void 0,li=!0,di=void 0,fi=!1,hi=[],pi=function e(t){var n=this,r=t||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),Uo.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],r=xo.defaults(r,{closeOnTop:!1,autoPlace:!0,width:e.DEFAULT_WIDTH}),r=xo.defaults(r,{resizable:r.autoPlace,hideable:r.autoPlace}),xo.isUndefined(r.load)?r.load={preset:"Default"}:r.preset&&(r.load.preset=r.preset),xo.isUndefined(r.parent)&&r.hideable&&hi.push(this),r.resizable=xo.isUndefined(r.parent)&&r.resizable,r.autoPlace&&xo.isUndefined(r.scrollable)&&(r.scrollable=!0);var o,i=ci&&"true"===localStorage.getItem(yi(this,"isLocal")),a=void 0,s=void 0;if(Object.defineProperties(this,{parent:{get:function(){return r.parent}},scrollable:{get:function(){return r.scrollable}},autoPlace:{get:function(){return r.autoPlace}},closeOnTop:{get:function(){return r.closeOnTop}},preset:{get:function(){return n.parent?n.getRoot().preset:r.load.preset},set:function(e){n.parent?n.getRoot().preset=e:r.load.preset=e,function(e){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].value===e.preset&&(e.__preset_select.selectedIndex=t)}(this),n.revert()}},width:{get:function(){return r.width},set:function(e){r.width=e,Ai(n,e)}},name:{get:function(){return r.name},set:function(e){r.name=e,s&&(s.innerHTML=r.name)}},closed:{get:function(){return r.closed},set:function(t){r.closed=t,r.closed?Uo.addClass(n.__ul,e.CLASS_CLOSED):Uo.removeClass(n.__ul,e.CLASS_CLOSED),this.onResize(),n.__closeButton&&(n.__closeButton.innerHTML=t?e.TEXT_OPEN:e.TEXT_CLOSED)}},load:{get:function(){return r.load}},useLocalStorage:{get:function(){return i},set:function(e){ci&&(i=e,e?Uo.bind(window,"unload",a):Uo.unbind(window,"unload",a),localStorage.setItem(yi(n,"isLocal"),e))}}}),xo.isUndefined(r.parent)){if(this.closed=r.closed||!1,Uo.addClass(this.domElement,e.CLASS_MAIN),Uo.makeSelectable(this.domElement,!1),ci&&i){n.useLocalStorage=!0;var c=localStorage.getItem(yi(this,"gui"));c&&(r.load=JSON.parse(c))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=e.TEXT_CLOSED,Uo.addClass(this.__closeButton,e.CLASS_CLOSE_BUTTON),r.closeOnTop?(Uo.addClass(this.__closeButton,e.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(Uo.addClass(this.__closeButton,e.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),Uo.bind(this.__closeButton,"click",(function(){n.closed=!n.closed}))}else{void 0===r.closed&&(r.closed=!0);var u=document.createTextNode(r.name);Uo.addClass(u,"controller-name"),s=_i(n,u);Uo.addClass(this.__ul,e.CLASS_CLOSED),Uo.addClass(s,"title"),Uo.bind(s,"click",(function(e){return e.preventDefault(),n.closed=!n.closed,!1})),r.closed||(this.closed=!1)}r.autoPlace&&(xo.isUndefined(r.parent)&&(li&&(di=document.createElement("div"),Uo.addClass(di,"dg"),Uo.addClass(di,e.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(di),li=!1),di.appendChild(this.domElement),Uo.addClass(this.domElement,e.CLASS_AUTO_PLACE)),this.parent||Ai(n,r.width)),this.__resizeHandler=function(){n.onResizeDebounced()},Uo.bind(window,"resize",this.__resizeHandler),Uo.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),Uo.bind(this.__ul,"transitionend",this.__resizeHandler),Uo.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),r.resizable&&xi(this),a=function(){ci&&"true"===localStorage.getItem(yi(n,"isLocal"))&&localStorage.setItem(yi(n,"gui"),JSON.stringify(n.getSaveObject()))},this.saveToLocalStorageIfPossible=a,r.parent||((o=n.getRoot()).width+=1,xo.defer((function(){o.width-=1})))};function _i(e,t,n){var r=document.createElement("li");return t&&r.appendChild(t),n?e.__ul.insertBefore(r,n):e.__ul.appendChild(r),e.onResize(),r}function mi(e){Uo.unbind(window,"resize",e.__resizeHandler),e.saveToLocalStorageIfPossible&&Uo.unbind(window,"unload",e.saveToLocalStorageIfPossible)}function gi(e,t){var n=e.__preset_select[e.__preset_select.selectedIndex];n.innerHTML=t?n.value+"*":n.value}function vi(e,t){var n=e.getRoot(),r=n.__rememberedObjects.indexOf(t.object);if(-1!==r){var o=n.__rememberedObjectIndecesToControllers[r];if(void 0===o&&(o={},n.__rememberedObjectIndecesToControllers[r]=o),o[t.property]=t,n.load&&n.load.remembered){var i=n.load.remembered,a=void 0;if(i[e.preset])a=i[e.preset];else{if(!i.Default)return;a=i.Default}if(a[r]&&void 0!==a[r][t.property]){var s=a[r][t.property];t.initialValue=s,t.setValue(s)}}}}function bi(e,t,n,r){if(void 0===t[n])throw new Error('Object "'+t+'" has no property "'+n+'"');var o=void 0;if(r.color)o=new ei(t,n);else{var i=[t,n].concat(r.factoryArgs);o=ii.apply(e,i)}r.before instanceof jo&&(r.before=r.before.__li),vi(e,o),Uo.addClass(o.domElement,"c");var a=document.createElement("span");Uo.addClass(a,"property-name"),a.innerHTML=o.property;var s=document.createElement("div");s.appendChild(a),s.appendChild(o.domElement);var c=_i(e,s,r.before);return Uo.addClass(c,pi.CLASS_CONTROLLER_ROW),o instanceof ei?Uo.addClass(c,"color"):Uo.addClass(c,Oo(o.getValue())),function(e,t,n){if(n.__li=t,n.__gui=e,xo.extend(n,{options:function(t){if(arguments.length>1){var r=n.__li.nextElementSibling;return n.remove(),bi(e,n.object,n.property,{before:r,factoryArgs:[xo.toArray(arguments)]})}if(xo.isArray(t)||xo.isObject(t)){var o=n.__li.nextElementSibling;return n.remove(),bi(e,n.object,n.property,{before:o,factoryArgs:[t]})}},name:function(e){return n.__li.firstElementChild.firstElementChild.innerHTML=e,n},listen:function(){return n.__gui.listen(n),n},remove:function(){return n.__gui.remove(n),n}}),n instanceof Qo){var r=new Jo(n.object,n.property,{min:n.__min,max:n.__max,step:n.__step});xo.each(["updateDisplay","onChange","onFinishChange","step","min","max"],(function(e){var t=n[e],o=r[e];n[e]=r[e]=function(){var e=Array.prototype.slice.call(arguments);return o.apply(r,e),t.apply(n,e)}})),Uo.addClass(t,"has-slider"),n.domElement.insertBefore(r.domElement,n.domElement.firstElementChild)}else if(n instanceof Jo){var o=function(t){if(xo.isNumber(n.__min)&&xo.isNumber(n.__max)){var r=n.__li.firstElementChild.firstElementChild.innerHTML,o=n.__gui.__listening.indexOf(n)>-1;n.remove();var i=bi(e,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[n.__min,n.__max,n.__step]});return i.name(r),o&&i.listen(),i}return t};n.min=xo.compose(o,n.min),n.max=xo.compose(o,n.max)}else n instanceof Yo?(Uo.bind(t,"click",(function(){Uo.fakeEvent(n.__checkbox,"click")})),Uo.bind(n.__checkbox,"click",(function(e){e.stopPropagation()}))):n instanceof Zo?(Uo.bind(t,"click",(function(){Uo.fakeEvent(n.__button,"click")})),Uo.bind(t,"mouseover",(function(){Uo.addClass(n.__button,"hover")})),Uo.bind(t,"mouseout",(function(){Uo.removeClass(n.__button,"hover")}))):n instanceof ei&&(Uo.addClass(t,"color"),n.updateDisplay=xo.compose((function(e){return t.style.borderLeftColor=n.__color.toString(),e}),n.updateDisplay),n.updateDisplay());n.setValue=xo.compose((function(t){return e.getRoot().__preset_select&&n.isModified()&&gi(e.getRoot(),!0),t}),n.setValue)}(e,c,o),e.__controllers.push(o),o}function yi(e,t){return document.location.href+"."+t}function Ei(e,t,n){var r=document.createElement("option");r.innerHTML=t,r.value=t,e.__preset_select.appendChild(r),n&&(e.__preset_select.selectedIndex=e.__preset_select.length-1)}function Si(e,t){t.style.display=e.useLocalStorage?"block":"none"}function wi(e){var t=e.__save_row=document.createElement("li");Uo.addClass(e.domElement,"has-save"),e.__ul.insertBefore(t,e.__ul.firstChild),Uo.addClass(t,"save-row");var n=document.createElement("span");n.innerHTML="&nbsp;",Uo.addClass(n,"button gears");var r=document.createElement("span");r.innerHTML="Save",Uo.addClass(r,"button"),Uo.addClass(r,"save");var o=document.createElement("span");o.innerHTML="New",Uo.addClass(o,"button"),Uo.addClass(o,"save-as");var i=document.createElement("span");i.innerHTML="Revert",Uo.addClass(i,"button"),Uo.addClass(i,"revert");var a=e.__preset_select=document.createElement("select");if(e.load&&e.load.remembered?xo.each(e.load.remembered,(function(t,n){Ei(e,n,n===e.preset)})):Ei(e,"Default",!1),Uo.bind(a,"change",(function(){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].innerHTML=e.__preset_select[t].value;e.preset=this.value})),t.appendChild(a),t.appendChild(n),t.appendChild(r),t.appendChild(o),t.appendChild(i),ci){var s=document.getElementById("dg-local-explain"),c=document.getElementById("dg-local-storage");document.getElementById("dg-save-locally").style.display="block","true"===localStorage.getItem(yi(0,"isLocal"))&&c.setAttribute("checked","checked"),Si(e,s),Uo.bind(c,"change",(function(){e.useLocalStorage=!e.useLocalStorage,Si(e,s)}))}var u=document.getElementById("dg-new-constructor");Uo.bind(u,"keydown",(function(e){!e.metaKey||67!==e.which&&67!==e.keyCode||ui.hide()})),Uo.bind(n,"click",(function(){u.innerHTML=JSON.stringify(e.getSaveObject(),void 0,2),ui.show(),u.focus(),u.select()})),Uo.bind(r,"click",(function(){e.save()})),Uo.bind(o,"click",(function(){var t=prompt("Enter a new preset name.");t&&e.saveAs(t)})),Uo.bind(i,"click",(function(){e.revert()}))}function xi(e){var t=void 0;function n(n){return n.preventDefault(),e.width+=t-n.clientX,e.onResize(),t=n.clientX,!1}function r(){Uo.removeClass(e.__closeButton,pi.CLASS_DRAG),Uo.unbind(window,"mousemove",n),Uo.unbind(window,"mouseup",r)}function o(o){return o.preventDefault(),t=o.clientX,Uo.addClass(e.__closeButton,pi.CLASS_DRAG),Uo.bind(window,"mousemove",n),Uo.bind(window,"mouseup",r),!1}e.__resize_handle=document.createElement("div"),xo.extend(e.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"}),Uo.bind(e.__resize_handle,"mousedown",o),Uo.bind(e.__closeButton,"mousedown",o),e.domElement.insertBefore(e.__resize_handle,e.domElement.firstElementChild)}function Ai(e,t){e.domElement.style.width=t+"px",e.__save_row&&e.autoPlace&&(e.__save_row.style.width=t+"px"),e.__closeButton&&(e.__closeButton.style.width=t+"px")}function Ci(e,t){var n={};return xo.each(e.__rememberedObjects,(function(r,o){var i={},a=e.__rememberedObjectIndecesToControllers[o];xo.each(a,(function(e,n){i[n]=t?e.initialValue:e.getValue()})),n[o]=i})),n}pi.toggleHide=function(){fi=!fi,xo.each(hi,(function(e){e.domElement.style.display=fi?"none":""}))},pi.CLASS_AUTO_PLACE="a",pi.CLASS_AUTO_PLACE_CONTAINER="ac",pi.CLASS_MAIN="main",pi.CLASS_CONTROLLER_ROW="cr",pi.CLASS_TOO_TALL="taller-than-window",pi.CLASS_CLOSED="closed",pi.CLASS_CLOSE_BUTTON="close-button",pi.CLASS_CLOSE_TOP="close-top",pi.CLASS_CLOSE_BOTTOM="close-bottom",pi.CLASS_DRAG="drag",pi.DEFAULT_WIDTH=245,pi.TEXT_CLOSED="Close Controls",pi.TEXT_OPEN="Open Controls",pi._keydownHandler=function(e){"text"===document.activeElement.type||72!==e.which&&72!==e.keyCode||pi.toggleHide()},Uo.bind(window,"keydown",pi._keydownHandler,!1),xo.extend(pi.prototype,{add:function(e,t){return bi(this,e,t,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(e,t){return bi(this,e,t,{color:!0})},remove:function(e){this.__ul.removeChild(e.__li),this.__controllers.splice(this.__controllers.indexOf(e),1);var t=this;xo.defer((function(){t.onResize()}))},destroy:function(){if(this.parent)throw new Error("Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.");this.autoPlace&&di.removeChild(this.domElement);var e=this;xo.each(this.__folders,(function(t){e.removeFolder(t)})),Uo.unbind(window,"keydown",pi._keydownHandler,!1),mi(this)},addFolder:function(e){if(void 0!==this.__folders[e])throw new Error('You already have a folder in this GUI by the name "'+e+'"');var t={name:e,parent:this};t.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[e]&&(t.closed=this.load.folders[e].closed,t.load=this.load.folders[e]);var n=new pi(t);this.__folders[e]=n;var r=_i(this,n.domElement);return Uo.addClass(r,"folder"),n},removeFolder:function(e){this.__ul.removeChild(e.domElement.parentElement),delete this.__folders[e.name],this.load&&this.load.folders&&this.load.folders[e.name]&&delete this.load.folders[e.name],mi(e);var t=this;xo.each(e.__folders,(function(t){e.removeFolder(t)})),xo.defer((function(){t.onResize()}))},open:function(){this.closed=!1},close:function(){this.closed=!0},hide:function(){this.domElement.style.display="none"},show:function(){this.domElement.style.display=""},onResize:function(){var e=this.getRoot();if(e.scrollable){var t=Uo.getOffset(e.__ul).top,n=0;xo.each(e.__ul.childNodes,(function(t){e.autoPlace&&t===e.__save_row||(n+=Uo.getHeight(t))})),window.innerHeight-t-20<n?(Uo.addClass(e.domElement,pi.CLASS_TOO_TALL),e.__ul.style.height=window.innerHeight-t-20+"px"):(Uo.removeClass(e.domElement,pi.CLASS_TOO_TALL),e.__ul.style.height="auto")}e.__resize_handle&&xo.defer((function(){e.__resize_handle.style.height=e.__ul.offsetHeight+"px"})),e.__closeButton&&(e.__closeButton.style.width=e.width+"px")},onResizeDebounced:xo.debounce((function(){this.onResize()}),50),remember:function(){if(xo.isUndefined(ui)&&((ui=new si).domElement.innerHTML=oi),this.parent)throw new Error("You can only call remember on a top level GUI.");var e=this;xo.each(Array.prototype.slice.call(arguments),(function(t){0===e.__rememberedObjects.length&&wi(e),-1===e.__rememberedObjects.indexOf(t)&&e.__rememberedObjects.push(t)})),this.autoPlace&&Ai(this,this.width)},getRoot:function(){for(var e=this;e.parent;)e=e.parent;return e},getSaveObject:function(){var e=this.load;return e.closed=this.closed,this.__rememberedObjects.length>0&&(e.preset=this.preset,e.remembered||(e.remembered={}),e.remembered[this.preset]=Ci(this)),e.folders={},xo.each(this.__folders,(function(t,n){e.folders[n]=t.getSaveObject()})),e},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=Ci(this),gi(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(e){this.load.remembered||(this.load.remembered={},this.load.remembered.Default=Ci(this,!0)),this.load.remembered[e]=Ci(this),this.preset=e,Ei(this,e,!0),this.saveToLocalStorageIfPossible()},revert:function(e){xo.each(this.__controllers,(function(t){this.getRoot().load.remembered?vi(e||this.getRoot(),t):t.setValue(t.initialValue),t.__onFinishChange&&t.__onFinishChange.call(t,t.getValue())}),this),xo.each(this.__folders,(function(e){e.revert(e)})),e||gi(this.getRoot(),!1)},listen:function(e){var t=0===this.__listening.length;this.__listening.push(e),t&&function e(t){0!==t.length&&ai.call(window,(function(){e(t)}));xo.each(t,(function(e){e.updateDisplay()}))}(this.__listening)},updateDisplay:function(){xo.each(this.__controllers,(function(e){e.updateDisplay()})),xo.each(this.__folders,(function(e){e.updateDisplay()}))}});var Mi={color:{Color:Ho,math:No,interpret:Io},controllers:{Controller:jo,BooleanController:Yo,OptionController:Ko,StringController:Wo,NumberController:Xo,NumberControllerBox:Jo,NumberControllerSlider:Qo,FunctionController:Zo,ColorController:ei},dom:{dom:Uo},gui:{GUI:pi},GUI:pi},Ii=t((function(t){!function(e){function n(){if(n.prototype._singleton)throw new Error("WebMidi is a singleton, it cannot be instantiated directly.");(n.prototype._singleton=this)._inputs=[],this._outputs=[],this._userHandlers={},this._stateChangeQueue=[],this._processingStateChange=!1,this._midiInterfaceEvents=["connected","disconnected"],this._nrpnBuffer=[[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]],this._nrpnEventsEnabled=!0,this._nrpnTypes=["entry","increment","decrement"],this._notes=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],this._semitones={C:0,D:2,E:4,F:5,G:7,A:9,B:11},Object.defineProperties(this,{MIDI_SYSTEM_MESSAGES:{value:{sysex:240,timecode:241,songposition:242,songselect:243,tuningrequest:246,sysexend:247,clock:248,start:250,continue:251,stop:252,activesensing:254,reset:255,midimessage:0,unknownsystemmessage:-1},writable:!1,enumerable:!0,configurable:!1},MIDI_CHANNEL_MESSAGES:{value:{noteoff:8,noteon:9,keyaftertouch:10,controlchange:11,channelmode:11,nrpn:11,programchange:12,channelaftertouch:13,pitchbend:14},writable:!1,enumerable:!0,configurable:!1},MIDI_REGISTERED_PARAMETER:{value:{pitchbendrange:[0,0],channelfinetuning:[0,1],channelcoarsetuning:[0,2],tuningprogram:[0,3],tuningbank:[0,4],modulationrange:[0,5],azimuthangle:[61,0],elevationangle:[61,1],gain:[61,2],distanceratio:[61,3],maximumdistance:[61,4],maximumdistancegain:[61,5],referencedistanceratio:[61,6],panspreadangle:[61,7],rollangle:[61,8]},writable:!1,enumerable:!0,configurable:!1},MIDI_CONTROL_CHANGE_MESSAGES:{value:{bankselectcoarse:0,modulationwheelcoarse:1,breathcontrollercoarse:2,footcontrollercoarse:4,portamentotimecoarse:5,dataentrycoarse:6,volumecoarse:7,balancecoarse:8,pancoarse:10,expressioncoarse:11,effectcontrol1coarse:12,effectcontrol2coarse:13,generalpurposeslider1:16,generalpurposeslider2:17,generalpurposeslider3:18,generalpurposeslider4:19,bankselectfine:32,modulationwheelfine:33,breathcontrollerfine:34,footcontrollerfine:36,portamentotimefine:37,dataentryfine:38,volumefine:39,balancefine:40,panfine:42,expressionfine:43,effectcontrol1fine:44,effectcontrol2fine:45,holdpedal:64,portamento:65,sustenutopedal:66,softpedal:67,legatopedal:68,hold2pedal:69,soundvariation:70,resonance:71,soundreleasetime:72,soundattacktime:73,brightness:74,soundcontrol6:75,soundcontrol7:76,soundcontrol8:77,soundcontrol9:78,soundcontrol10:79,generalpurposebutton1:80,generalpurposebutton2:81,generalpurposebutton3:82,generalpurposebutton4:83,reverblevel:91,tremololevel:92,choruslevel:93,celestelevel:94,phaserlevel:95,databuttonincrement:96,databuttondecrement:97,nonregisteredparametercoarse:98,nonregisteredparameterfine:99,registeredparametercoarse:100,registeredparameterfine:101},writable:!1,enumerable:!0,configurable:!1},MIDI_NRPN_MESSAGES:{value:{entrymsb:6,entrylsb:38,increment:96,decrement:97,paramlsb:98,parammsb:99,nullactiveparameter:127},writable:!1,enumerable:!0,configurable:!1},MIDI_CHANNEL_MODE_MESSAGES:{value:{allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127},writable:!1,enumerable:!0,configurable:!1},octaveOffset:{value:0,writable:!0,enumerable:!0,configurable:!1}}),Object.defineProperties(this,{supported:{enumerable:!0,get:function(){return"requestMIDIAccess"in navigator}},enabled:{enumerable:!0,get:function(){return void 0!==this.interface}.bind(this)},inputs:{enumerable:!0,get:function(){return this._inputs}.bind(this)},outputs:{enumerable:!0,get:function(){return this._outputs}.bind(this)},sysexEnabled:{enumerable:!0,get:function(){return!(!this.interface||!this.interface.sysexEnabled)}.bind(this)},nrpnEventsEnabled:{enumerable:!0,get:function(){return!!this._nrpnEventsEnabled}.bind(this),set:function(e){return this._nrpnEventsEnabled=e,this._nrpnEventsEnabled}},nrpnTypes:{enumerable:!0,get:function(){return this._nrpnTypes}.bind(this)},time:{enumerable:!0,get:function(){return performance.now()}}})}var r=new n;function o(e){var t=this;this._userHandlers={channel:{},system:{}},this._midiInput=e,Object.defineProperties(this,{connection:{enumerable:!0,get:function(){return t._midiInput.connection}},id:{enumerable:!0,get:function(){return t._midiInput.id}},manufacturer:{enumerable:!0,get:function(){return t._midiInput.manufacturer}},name:{enumerable:!0,get:function(){return t._midiInput.name}},state:{enumerable:!0,get:function(){return t._midiInput.state}},type:{enumerable:!0,get:function(){return t._midiInput.type}}}),this._initializeUserHandlers(),this._midiInput.onmidimessage=this._onMidiMessage.bind(this)}function i(e){var t=this;this._midiOutput=e,Object.defineProperties(this,{connection:{enumerable:!0,get:function(){return t._midiOutput.connection}},id:{enumerable:!0,get:function(){return t._midiOutput.id}},manufacturer:{enumerable:!0,get:function(){return t._midiOutput.manufacturer}},name:{enumerable:!0,get:function(){return t._midiOutput.name}},state:{enumerable:!0,get:function(){return t._midiOutput.state}},type:{enumerable:!0,get:function(){return t._midiOutput.type}}})}n.prototype.enable=function(e,t){this.enabled||(this.supported?navigator.requestMIDIAccess({sysex:t}).then(function(t){var n,r=[],o=[];this.interface=t,this._resetInterfaceUserHandlers(),this.interface.onstatechange=function(e){r.push(e)};for(var i=t.inputs.values(),a=i.next();a&&!a.done;a=i.next())o.push(a.value.open());for(var s=t.outputs.values(),c=s.next();c&&!c.done;c=s.next())o.push(c.value.open());function u(){clearTimeout(n),this._updateInputsAndOutputs(),this.interface.onstatechange=this._onInterfaceStateChange.bind(this),"function"==typeof e&&e.call(this),r.forEach(function(e){this._onInterfaceStateChange(e)}.bind(this))}n=setTimeout(u.bind(this),200),Promise&&Promise.all(o).catch((function(e){})).then(u.bind(this))}.bind(this),function(t){"function"==typeof e&&e.call(this,t)}.bind(this)):"function"==typeof e&&e(new Error("The Web MIDI API is not supported by your browser.")))},n.prototype.disable=function(){if(!this.supported)throw new Error("The Web MIDI API is not supported by your browser.");this.interface&&(this.interface.onstatechange=void 0),this.interface=void 0,this._inputs=[],this._outputs=[],this._nrpnEventsEnabled=!0,this._resetInterfaceUserHandlers()},n.prototype.addListener=function(e,t){if(!this.enabled)throw new Error("WebMidi must be enabled before adding event listeners.");if("function"!=typeof t)throw new TypeError("The 'listener' parameter must be a function.");if(!(0<=this._midiInterfaceEvents.indexOf(e)))throw new TypeError("The specified event type is not supported.");return this._userHandlers[e].push(t),this},n.prototype.hasListener=function(e,t){if(!this.enabled)throw new Error("WebMidi must be enabled before checking event listeners.");if("function"!=typeof t)throw new TypeError("The 'listener' parameter must be a function.");if(!(0<=this._midiInterfaceEvents.indexOf(e)))throw new TypeError("The specified event type is not supported.");for(var n=0;n<this._userHandlers[e].length;n++)if(this._userHandlers[e][n]===t)return!0;return!1},n.prototype.removeListener=function(e,t){if(!this.enabled)throw new Error("WebMidi must be enabled before removing event listeners.");if(void 0!==t&&"function"!=typeof t)throw new TypeError("The 'listener' parameter must be a function.");if(0<=this._midiInterfaceEvents.indexOf(e))if(t)for(var n=0;n<this._userHandlers[e].length;n++)this._userHandlers[e][n]===t&&this._userHandlers[e].splice(n,1);else this._userHandlers[e]=[];else{if(void 0!==e)throw new TypeError("The specified event type is not supported.");this._resetInterfaceUserHandlers()}return this},n.prototype.toMIDIChannels=function(e){var t;if("all"===e||void 0===e)t=["all"];else{if("none"===e)return[];t=Array.isArray(e)?e:[e]}return-1<t.indexOf("all")&&(t=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]),t.map((function(e){return parseInt(e)})).filter((function(e){return 1<=e&&e<=16}))},n.prototype.getInputById=function(e){if(!this.enabled)throw new Error("WebMidi is not enabled.");e=String(e);for(var t=0;t<this.inputs.length;t++)if(this.inputs[t].id===e)return this.inputs[t];return!1},n.prototype.getOutputById=function(e){if(!this.enabled)throw new Error("WebMidi is not enabled.");e=String(e);for(var t=0;t<this.outputs.length;t++)if(this.outputs[t].id===e)return this.outputs[t];return!1},n.prototype.getInputByName=function(e){if(!this.enabled)throw new Error("WebMidi is not enabled.");for(var t=0;t<this.inputs.length;t++)if(~this.inputs[t].name.indexOf(e))return this.inputs[t];return!1},n.prototype.getOctave=function(e){if(null!=e&&0<=e&&e<=127)return Math.floor(Math.floor(e)/12-1)+Math.floor(r.octaveOffset)},n.prototype.getOutputByName=function(e){if(!this.enabled)throw new Error("WebMidi is not enabled.");for(var t=0;t<this.outputs.length;t++)if(~this.outputs[t].name.indexOf(e))return this.outputs[t];return!1},n.prototype.guessNoteNumber=function(e){var t=!1;if(e&&e.toFixed&&0<=e&&e<=127?t=Math.round(e):0<=parseInt(e)&&parseInt(e)<=127?t=parseInt(e):("string"==typeof e||e instanceof String)&&(t=this.noteNameToNumber(e)),!1===t)throw new Error("Invalid input value ("+e+").");return t},n.prototype.noteNameToNumber=function(e){"string"!=typeof e&&(e="");var t=e.match(/([CDEFGAB])(#{0,2}|b{0,2})(-?\d+)/i);if(!t)throw new RangeError("Invalid note name.");var n=r._semitones[t[1].toUpperCase()],o=12*(parseInt(t[3])+1-Math.floor(r.octaveOffset))+n;if(-1<t[2].toLowerCase().indexOf("b")?o-=t[2].length:-1<t[2].toLowerCase().indexOf("#")&&(o+=t[2].length),o<0||127<o)throw new RangeError("Invalid note name or note outside valid range.");return o},n.prototype._updateInputsAndOutputs=function(){this._updateInputs(),this._updateOutputs()},n.prototype._updateInputs=function(){for(var e=0;e<this._inputs.length;e++){for(var t=!0,n=this.interface.inputs.values(),r=n.next();r&&!r.done;r=n.next())if(this._inputs[e]._midiInput===r.value){t=!1;break}t&&this._inputs.splice(e,1)}this.interface&&this.interface.inputs.forEach(function(e){for(var t=!0,n=0;n<this._inputs.length;n++)this._inputs[n]._midiInput===e&&(t=!1);t&&this._inputs.push(new o(e))}.bind(this))},n.prototype._updateOutputs=function(){for(var e=0;e<this._outputs.length;e++){for(var t=!0,n=this.interface.outputs.values(),r=n.next();r&&!r.done;r=n.next())if(this._outputs[e]._midiOutput===r.value){t=!1;break}t&&this._outputs.splice(e,1)}this.interface&&this.interface.outputs.forEach(function(e){for(var t=!0,n=0;n<this._outputs.length;n++)this._outputs[n]._midiOutput===e&&(t=!1);t&&this._outputs.push(new i(e))}.bind(this))},n.prototype._onInterfaceStateChange=function(e){this._updateInputsAndOutputs();var t={timestamp:e.timeStamp,type:e.port.state};this.interface&&"connected"===e.port.state?"output"===e.port.type?t.port=this.getOutputById(e.port.id):"input"===e.port.type&&(t.port=this.getInputById(e.port.id)):t.port={connection:"closed",id:e.port.id,manufacturer:e.port.manufacturer,name:e.port.name,state:e.port.state,type:e.port.type},this._userHandlers[e.port.state].forEach((function(e){e(t)}))},n.prototype._resetInterfaceUserHandlers=function(){for(var e=0;e<this._midiInterfaceEvents.length;e++)this._userHandlers[this._midiInterfaceEvents[e]]=[]},o.prototype.on=o.prototype.addListener=function(e,t,n){var o=this;if(void 0===t&&(t="all"),Array.isArray(t)||(t=[t]),t.forEach((function(e){if("all"!==e&&!(1<=e&&e<=16))throw new RangeError("The 'channel' parameter is invalid.")})),"function"!=typeof n)throw new TypeError("The 'listener' parameter must be a function.");if(void 0!==r.MIDI_SYSTEM_MESSAGES[e])this._userHandlers.system[e]||(this._userHandlers.system[e]=[]),this._userHandlers.system[e].push(n);else{if(void 0===r.MIDI_CHANNEL_MESSAGES[e])throw new TypeError("The specified event type is not supported.");if(-1<t.indexOf("all")){t=[];for(var i=1;i<=16;i++)t.push(i)}this._userHandlers.channel[e]||(this._userHandlers.channel[e]=[]),t.forEach((function(t){o._userHandlers.channel[e][t]||(o._userHandlers.channel[e][t]=[]),o._userHandlers.channel[e][t].push(n)}))}return this},o.prototype.hasListener=function(e,t,n){var o=this;if("function"!=typeof n)throw new TypeError("The 'listener' parameter must be a function.");if(void 0===t&&(t="all"),t.constructor!==Array&&(t=[t]),void 0!==r.MIDI_SYSTEM_MESSAGES[e]){for(var i=0;i<this._userHandlers.system[e].length;i++)if(this._userHandlers.system[e][i]===n)return!0}else if(void 0!==r.MIDI_CHANNEL_MESSAGES[e]){if(-1<t.indexOf("all")){t=[];for(var a=1;a<=16;a++)t.push(a)}return!!this._userHandlers.channel[e]&&t.every((function(t){var r=o._userHandlers.channel[e][t];return r&&-1<r.indexOf(n)}))}return!1},o.prototype.removeListener=function(e,t,n){var o=this;if(void 0!==n&&"function"!=typeof n)throw new TypeError("The 'listener' parameter must be a function.");if(void 0===t&&(t="all"),t.constructor!==Array&&(t=[t]),void 0!==r.MIDI_SYSTEM_MESSAGES[e])if(void 0===n)this._userHandlers.system[e]=[];else for(var i=0;i<this._userHandlers.system[e].length;i++)this._userHandlers.system[e][i]===n&&this._userHandlers.system[e].splice(i,1);else if(void 0!==r.MIDI_CHANNEL_MESSAGES[e]){if(-1<t.indexOf("all")){t=[];for(var a=1;a<=16;a++)t.push(a)}if(!this._userHandlers.channel[e])return this;t.forEach((function(t){var r=o._userHandlers.channel[e][t];if(r)if(void 0===n)o._userHandlers.channel[e][t]=[];else for(var i=0;i<r.length;i++)r[i]===n&&r.splice(i,1)}))}else{if(void 0!==e)throw new TypeError("The specified event type is not supported.");this._initializeUserHandlers()}return this},o.prototype._initializeUserHandlers=function(){for(var e in r.MIDI_CHANNEL_MESSAGES)r.MIDI_CHANNEL_MESSAGES.hasOwnProperty(e)&&(this._userHandlers.channel[e]={});for(var t in r.MIDI_SYSTEM_MESSAGES)r.MIDI_SYSTEM_MESSAGES.hasOwnProperty(t)&&(this._userHandlers.system[t]=[])},o.prototype._onMidiMessage=function(e){if(0<this._userHandlers.system.midimessage.length){var t={target:this,data:e.data,timestamp:e.timeStamp,type:"midimessage"};this._userHandlers.system.midimessage.forEach((function(e){e(t)}))}e.data[0]<240?(this._parseChannelEvent(e),this._parseNrpnEvent(e)):e.data[0]<=255&&this._parseSystemEvent(e)},o.prototype._parseNrpnEvent=function(e){var t,n,o=e.data[0]>>4,i=15&e.data[0],a=1+i;if(1<e.data.length&&(t=e.data[1],n=2<e.data.length?e.data[2]:void 0),r.nrpnEventsEnabled&&o===r.MIDI_CHANNEL_MESSAGES.controlchange&&(t>=r.MIDI_NRPN_MESSAGES.increment&&t<=r.MIDI_NRPN_MESSAGES.parammsb||t===r.MIDI_NRPN_MESSAGES.entrymsb||t===r.MIDI_NRPN_MESSAGES.entrylsb)){var s={target:this,type:"controlchange",data:e.data,timestamp:e.timeStamp,channel:a,controller:{number:t,name:this.getCcNameByNumber(t)},value:n};if(s.controller.number===r.MIDI_NRPN_MESSAGES.parammsb&&s.value!=r.MIDI_NRPN_MESSAGES.nullactiveparameter)r._nrpnBuffer[i]=[],r._nrpnBuffer[i][0]=s;else if(1===r._nrpnBuffer[i].length&&s.controller.number===r.MIDI_NRPN_MESSAGES.paramlsb)r._nrpnBuffer[i].push(s);else if(2!==r._nrpnBuffer[i].length||s.controller.number!==r.MIDI_NRPN_MESSAGES.increment&&s.controller.number!==r.MIDI_NRPN_MESSAGES.decrement&&s.controller.number!==r.MIDI_NRPN_MESSAGES.entrymsb)if(3===r._nrpnBuffer[i].length&&r._nrpnBuffer[i][2].number===r.MIDI_NRPN_MESSAGES.entrymsb&&s.controller.number===r.MIDI_NRPN_MESSAGES.entrylsb)r._nrpnBuffer[i].push(s);else if(3<=r._nrpnBuffer[i].length&&r._nrpnBuffer[i].length<=4&&s.controller.number===r.MIDI_NRPN_MESSAGES.parammsb&&s.value===r.MIDI_NRPN_MESSAGES.nullactiveparameter)r._nrpnBuffer[i].push(s);else if(4<=r._nrpnBuffer[i].length&&r._nrpnBuffer[i].length<=5&&s.controller.number===r.MIDI_NRPN_MESSAGES.paramlsb&&s.value===r.MIDI_NRPN_MESSAGES.nullactiveparameter){r._nrpnBuffer[i].push(s);var c=[];r._nrpnBuffer[i].forEach((function(e){c.push(e.data)}));var u=r._nrpnBuffer[i][0].value<<7|r._nrpnBuffer[i][1].value,l=r._nrpnBuffer[i][2].value;6===r._nrpnBuffer[i].length&&(l=r._nrpnBuffer[i][2].value<<7|r._nrpnBuffer[i][3].value);var d="";switch(r._nrpnBuffer[i][2].controller.number){case r.MIDI_NRPN_MESSAGES.entrymsb:d=r._nrpnTypes[0];break;case r.MIDI_NRPN_MESSAGES.increment:d=r._nrpnTypes[1];break;case r.MIDI_NRPN_MESSAGES.decrement:d=r._nrpnTypes[2];break;default:throw new Error("The NPRN type was unidentifiable.")}var f={timestamp:s.timestamp,channel:s.channel,type:"nrpn",data:c,controller:{number:u,type:d,name:"Non-Registered Parameter "+u},value:l};r._nrpnBuffer[i]=[],this._userHandlers.channel[f.type]&&this._userHandlers.channel[f.type][f.channel]&&this._userHandlers.channel[f.type][f.channel].forEach((function(e){e(f)}))}else r._nrpnBuffer[i]=[];else r._nrpnBuffer[i].push(s)}},o.prototype._parseChannelEvent=function(e){var t,n,o=e.data[0]>>4,i=1+(15&e.data[0]);1<e.data.length&&(t=e.data[1],n=2<e.data.length?e.data[2]:void 0);var a={target:this,data:e.data,timestamp:e.timeStamp,channel:i};o===r.MIDI_CHANNEL_MESSAGES.noteoff||o===r.MIDI_CHANNEL_MESSAGES.noteon&&0===n?(a.type="noteoff",a.note={number:t,name:r._notes[t%12],octave:r.getOctave(t)},a.velocity=n/127,a.rawVelocity=n):o===r.MIDI_CHANNEL_MESSAGES.noteon?(a.type="noteon",a.note={number:t,name:r._notes[t%12],octave:r.getOctave(t)},a.velocity=n/127,a.rawVelocity=n):o===r.MIDI_CHANNEL_MESSAGES.keyaftertouch?(a.type="keyaftertouch",a.note={number:t,name:r._notes[t%12],octave:r.getOctave(t)},a.value=n/127):o===r.MIDI_CHANNEL_MESSAGES.controlchange&&0<=t&&t<=119?(a.type="controlchange",a.controller={number:t,name:this.getCcNameByNumber(t)},a.value=n):o===r.MIDI_CHANNEL_MESSAGES.channelmode&&120<=t&&t<=127?(a.type="channelmode",a.controller={number:t,name:this.getChannelModeByNumber(t)},a.value=n):o===r.MIDI_CHANNEL_MESSAGES.programchange?(a.type="programchange",a.value=t):o===r.MIDI_CHANNEL_MESSAGES.channelaftertouch?(a.type="channelaftertouch",a.value=t/127):o===r.MIDI_CHANNEL_MESSAGES.pitchbend?(a.type="pitchbend",a.value=((n<<7)+t-8192)/8192):a.type="unknownchannelmessage",this._userHandlers.channel[a.type]&&this._userHandlers.channel[a.type][i]&&this._userHandlers.channel[a.type][i].forEach((function(e){e(a)}))},o.prototype.getCcNameByNumber=function(e){if(!(0<=(e=Math.floor(e))&&e<=119))throw new RangeError("The control change number must be between 0 and 119.");for(var t in r.MIDI_CONTROL_CHANGE_MESSAGES)if(r.MIDI_CONTROL_CHANGE_MESSAGES.hasOwnProperty(t)&&e===r.MIDI_CONTROL_CHANGE_MESSAGES[t])return t},o.prototype.getChannelModeByNumber=function(e){if(!(120<=(e=Math.floor(e))&&status<=127))throw new RangeError("The control change number must be between 120 and 127.");for(var t in r.MIDI_CHANNEL_MODE_MESSAGES)if(r.MIDI_CHANNEL_MODE_MESSAGES.hasOwnProperty(t)&&e===r.MIDI_CHANNEL_MODE_MESSAGES[t])return t},o.prototype._parseSystemEvent=function(e){var t=e.data[0],n={target:this,data:e.data,timestamp:e.timeStamp};t===r.MIDI_SYSTEM_MESSAGES.sysex?n.type="sysex":t===r.MIDI_SYSTEM_MESSAGES.timecode?n.type="timecode":t===r.MIDI_SYSTEM_MESSAGES.songposition?n.type="songposition":t===r.MIDI_SYSTEM_MESSAGES.songselect?(n.type="songselect",n.song=e.data[1]):t===r.MIDI_SYSTEM_MESSAGES.tuningrequest?n.type="tuningrequest":t===r.MIDI_SYSTEM_MESSAGES.clock?n.type="clock":t===r.MIDI_SYSTEM_MESSAGES.start?n.type="start":t===r.MIDI_SYSTEM_MESSAGES.continue?n.type="continue":t===r.MIDI_SYSTEM_MESSAGES.stop?n.type="stop":t===r.MIDI_SYSTEM_MESSAGES.activesensing?n.type="activesensing":t===r.MIDI_SYSTEM_MESSAGES.reset?n.type="reset":n.type="unknownsystemmessage",this._userHandlers.system[n.type]&&this._userHandlers.system[n.type].forEach((function(e){e(n)}))},i.prototype.send=function(e,t,n){if(!(128<=e&&e<=255))throw new RangeError("The status byte must be an integer between 128 (0x80) and 255 (0xFF).");void 0===t&&(t=[]),Array.isArray(t)||(t=[t]);var r=[];return t.forEach((function(e){var t=Math.floor(e);if(!(0<=t&&t<=255))throw new RangeError("Data bytes must be integers between 0 (0x00) and 255 (0xFF).");r.push(t)})),this._midiOutput.send([e].concat(r),parseFloat(n)||0),this},i.prototype.sendSysex=function(e,t,n){if(!r.sysexEnabled)throw new Error("Sysex message support must first be activated.");return n=n||{},e=[].concat(e),t.forEach((function(e){if(e<0||127<e)throw new RangeError("The data bytes of a sysex message must be integers between 0 (0x00) and 127 (0x7F).")})),t=e.concat(t,r.MIDI_SYSTEM_MESSAGES.sysexend),this.send(r.MIDI_SYSTEM_MESSAGES.sysex,t,this._parseTimeParameter(n.time)),this},i.prototype.sendTimecodeQuarterFrame=function(e,t){return t=t||{},this.send(r.MIDI_SYSTEM_MESSAGES.timecode,e,this._parseTimeParameter(t.time)),this},i.prototype.sendSongPosition=function(e,t){t=t||{};var n=(e=Math.floor(e)||0)>>7&127,o=127&e;return this.send(r.MIDI_SYSTEM_MESSAGES.songposition,[n,o],this._parseTimeParameter(t.time)),this},i.prototype.sendSongSelect=function(e,t){if(t=t||{},!(0<=(e=Math.floor(e))&&e<=127))throw new RangeError("The song number must be between 0 and 127.");return this.send(r.MIDI_SYSTEM_MESSAGES.songselect,[e],this._parseTimeParameter(t.time)),this},i.prototype.sendTuningRequest=function(e){return e=e||{},this.send(r.MIDI_SYSTEM_MESSAGES.tuningrequest,void 0,this._parseTimeParameter(e.time)),this},i.prototype.sendClock=function(e){return e=e||{},this.send(r.MIDI_SYSTEM_MESSAGES.clock,void 0,this._parseTimeParameter(e.time)),this},i.prototype.sendStart=function(e){return e=e||{},this.send(r.MIDI_SYSTEM_MESSAGES.start,void 0,this._parseTimeParameter(e.time)),this},i.prototype.sendContinue=function(e){return e=e||{},this.send(r.MIDI_SYSTEM_MESSAGES.continue,void 0,this._parseTimeParameter(e.time)),this},i.prototype.sendStop=function(e){return e=e||{},this.send(r.MIDI_SYSTEM_MESSAGES.stop,void 0,this._parseTimeParameter(e.time)),this},i.prototype.sendActiveSensing=function(e){return e=e||{},this.send(r.MIDI_SYSTEM_MESSAGES.activesensing,[],this._parseTimeParameter(e.time)),this},i.prototype.sendReset=function(e){return e=e||{},this.send(r.MIDI_SYSTEM_MESSAGES.reset,void 0,this._parseTimeParameter(e.time)),this},i.prototype.stopNote=function(e,t,n){if("all"===e)return this.sendChannelMode("allnotesoff",0,t,n);var o=64;return(n=n||{}).rawVelocity?!isNaN(n.velocity)&&0<=n.velocity&&n.velocity<=127&&(o=n.velocity):!isNaN(n.velocity)&&0<=n.velocity&&n.velocity<=1&&(o=127*n.velocity),this._convertNoteToArray(e).forEach(function(e){r.toMIDIChannels(t).forEach(function(t){this.send((r.MIDI_CHANNEL_MESSAGES.noteoff<<4)+(t-1),[e,Math.round(o)],this._parseTimeParameter(n.time))}.bind(this))}.bind(this)),this},i.prototype.playNote=function(e,t,n){var o,i=64;if((n=n||{}).rawVelocity?!isNaN(n.velocity)&&0<=n.velocity&&n.velocity<=127&&(i=n.velocity):!isNaN(n.velocity)&&0<=n.velocity&&n.velocity<=1&&(i=127*n.velocity),o=this._parseTimeParameter(n.time),this._convertNoteToArray(e).forEach(function(e){r.toMIDIChannels(t).forEach(function(t){this.send((r.MIDI_CHANNEL_MESSAGES.noteon<<4)+(t-1),[e,Math.round(i)],o)}.bind(this))}.bind(this)),!isNaN(n.duration)){n.duration<=0&&(n.duration=0);var a=64;n.rawVelocity?!isNaN(n.release)&&0<=n.release&&n.release<=127&&(a=n.release):!isNaN(n.release)&&0<=n.release&&n.release<=1&&(a=127*n.release),this._convertNoteToArray(e).forEach(function(e){r.toMIDIChannels(t).forEach(function(t){this.send((r.MIDI_CHANNEL_MESSAGES.noteoff<<4)+(t-1),[e,Math.round(a)],(o||r.time)+n.duration)}.bind(this))}.bind(this))}return this},i.prototype.sendKeyAftertouch=function(e,t,n,o){var i=this;if(o=o||{},t<1||16<t)throw new RangeError("The channel must be between 1 and 16.");(isNaN(n)||n<0||1<n)&&(n=.5);var a=Math.round(127*n);return this._convertNoteToArray(e).forEach((function(e){r.toMIDIChannels(t).forEach((function(t){i.send((r.MIDI_CHANNEL_MESSAGES.keyaftertouch<<4)+(t-1),[e,a],i._parseTimeParameter(o.time))}))})),this},i.prototype.sendControlChange=function(e,t,n,o){if(o=o||{},"string"==typeof e){if(void 0===(e=r.MIDI_CONTROL_CHANGE_MESSAGES[e]))throw new TypeError("Invalid controller name.")}else if(!(0<=(e=Math.floor(e))&&e<=119))throw new RangeError("Controller numbers must be between 0 and 119.");if(!(0<=(t=Math.floor(t)||0)&&t<=127))throw new RangeError("Controller value must be between 0 and 127.");return r.toMIDIChannels(n).forEach(function(n){this.send((r.MIDI_CHANNEL_MESSAGES.controlchange<<4)+(n-1),[e,t],this._parseTimeParameter(o.time))}.bind(this)),this},i.prototype._selectRegisteredParameter=function(e,t,n){var o=this;if(e[0]=Math.floor(e[0]),!(0<=e[0]&&e[0]<=127))throw new RangeError("The control65 value must be between 0 and 127");if(e[1]=Math.floor(e[1]),!(0<=e[1]&&e[1]<=127))throw new RangeError("The control64 value must be between 0 and 127");return r.toMIDIChannels(t).forEach((function(){o.sendControlChange(101,e[0],t,{time:n}),o.sendControlChange(100,e[1],t,{time:n})})),this},i.prototype._selectNonRegisteredParameter=function(e,t,n){var o=this;if(e[0]=Math.floor(e[0]),!(0<=e[0]&&e[0]<=127))throw new RangeError("The control63 value must be between 0 and 127");if(e[1]=Math.floor(e[1]),!(0<=e[1]&&e[1]<=127))throw new RangeError("The control62 value must be between 0 and 127");return r.toMIDIChannels(t).forEach((function(){o.sendControlChange(99,e[0],t,{time:n}),o.sendControlChange(98,e[1],t,{time:n})})),this},i.prototype._setCurrentRegisteredParameter=function(e,t,n){var o=this;if((e=[].concat(e))[0]=Math.floor(e[0]),!(0<=e[0]&&e[0]<=127))throw new RangeError("The msb value must be between 0 and 127");return r.toMIDIChannels(t).forEach((function(){o.sendControlChange(6,e[0],t,{time:n})})),e[1]=Math.floor(e[1]),0<=e[1]&&e[1]<=127&&r.toMIDIChannels(t).forEach((function(){o.sendControlChange(38,e[1],t,{time:n})})),this},i.prototype._deselectRegisteredParameter=function(e,t){var n=this;return r.toMIDIChannels(e).forEach((function(){n.sendControlChange(101,127,e,{time:t}),n.sendControlChange(100,127,e,{time:t})})),this},i.prototype.setRegisteredParameter=function(e,t,n,o){var i=this;if(o=o||{},!Array.isArray(e)){if(!r.MIDI_REGISTERED_PARAMETER[e])throw new Error("The specified parameter is not available.");e=r.MIDI_REGISTERED_PARAMETER[e]}return r.toMIDIChannels(n).forEach((function(){i._selectRegisteredParameter(e,n,o.time),i._setCurrentRegisteredParameter(t,n,o.time),i._deselectRegisteredParameter(n,o.time)})),this},i.prototype.setNonRegisteredParameter=function(e,t,n,o){var i=this;if(o=o||{},!(0<=e[0]&&e[0]<=127&&0<=e[1]&&e[1]<=127))throw new Error("Position 0 and 1 of the 2-position parameter array must both be between 0 and 127.");return t=[].concat(t),r.toMIDIChannels(n).forEach((function(){i._selectNonRegisteredParameter(e,n,o.time),i._setCurrentRegisteredParameter(t,n,o.time),i._deselectRegisteredParameter(n,o.time)})),this},i.prototype.incrementRegisteredParameter=function(e,t,n){var o=this;if(n=n||{},!Array.isArray(e)){if(!r.MIDI_REGISTERED_PARAMETER[e])throw new Error("The specified parameter is not available.");e=r.MIDI_REGISTERED_PARAMETER[e]}return r.toMIDIChannels(t).forEach((function(){o._selectRegisteredParameter(e,t,n.time),o.sendControlChange(96,0,t,{time:n.time}),o._deselectRegisteredParameter(t,n.time)})),this},i.prototype.decrementRegisteredParameter=function(e,t,n){if(n=n||{},!Array.isArray(e)){if(!r.MIDI_REGISTERED_PARAMETER[e])throw new TypeError("The specified parameter is not available.");e=r.MIDI_REGISTERED_PARAMETER[e]}return r.toMIDIChannels(t).forEach(function(){this._selectRegisteredParameter(e,t,n.time),this.sendControlChange(97,0,t,{time:n.time}),this._deselectRegisteredParameter(t,n.time)}.bind(this)),this},i.prototype.setPitchBendRange=function(e,t,n,o){var i=this;if(o=o||{},!(0<=(e=Math.floor(e)||0)&&e<=127))throw new RangeError("The semitones value must be between 0 and 127");if(!(0<=(t=Math.floor(t)||0)&&t<=127))throw new RangeError("The cents value must be between 0 and 127");return r.toMIDIChannels(n).forEach((function(){i.setRegisteredParameter("pitchbendrange",[e,t],n,{time:o.time})})),this},i.prototype.setModulationRange=function(e,t,n,o){var i=this;if(o=o||{},!(0<=(e=Math.floor(e)||0)&&e<=127))throw new RangeError("The semitones value must be between 0 and 127");if(!(0<=(t=Math.floor(t)||0)&&t<=127))throw new RangeError("The cents value must be between 0 and 127");return r.toMIDIChannels(n).forEach((function(){i.setRegisteredParameter("modulationrange",[e,t],n,{time:o.time})})),this},i.prototype.setMasterTuning=function(e,t,n){var o=this;if(n=n||{},(e=parseFloat(e)||0)<=-65||64<=e)throw new RangeError("The value must be a decimal number larger than -65 and smaller than 64.");var i=Math.floor(e)+64,a=e-Math.floor(e),s=(a=Math.round((a+1)/2*16383))>>7&127,c=127&a;return r.toMIDIChannels(t).forEach((function(){o.setRegisteredParameter("channelcoarsetuning",i,t,{time:n.time}),o.setRegisteredParameter("channelfinetuning",[s,c],t,{time:n.time})})),this},i.prototype.setTuningProgram=function(e,t,n){var o=this;if(n=n||{},!(0<=(e=Math.floor(e))&&e<=127))throw new RangeError("The program value must be between 0 and 127");return r.toMIDIChannels(t).forEach((function(){o.setRegisteredParameter("tuningprogram",e,t,{time:n.time})})),this},i.prototype.setTuningBank=function(e,t,n){var o=this;if(n=n||{},!(0<=(e=Math.floor(e)||0)&&e<=127))throw new RangeError("The bank value must be between 0 and 127");return r.toMIDIChannels(t).forEach((function(){o.setRegisteredParameter("tuningbank",e,t,{time:n.time})})),this},i.prototype.sendChannelMode=function(e,t,n,o){if(o=o||{},"string"==typeof e){if(!(e=r.MIDI_CHANNEL_MODE_MESSAGES[e]))throw new TypeError("Invalid channel mode message name.")}else if(!(120<=(e=Math.floor(e))&&e<=127))throw new RangeError("Channel mode numerical identifiers must be between 120 and 127.");if((t=Math.floor(t)||0)<0||127<t)throw new RangeError("Value must be an integer between 0 and 127.");return r.toMIDIChannels(n).forEach(function(n){this.send((r.MIDI_CHANNEL_MESSAGES.channelmode<<4)+(n-1),[e,t],this._parseTimeParameter(o.time))}.bind(this)),this},i.prototype.sendProgramChange=function(e,t,n){var o=this;if(n=n||{},e=Math.floor(e),isNaN(e)||e<0||127<e)throw new RangeError("Program numbers must be between 0 and 127.");return r.toMIDIChannels(t).forEach((function(t){o.send((r.MIDI_CHANNEL_MESSAGES.programchange<<4)+(t-1),[e],o._parseTimeParameter(n.time))})),this},i.prototype.sendChannelAftertouch=function(e,t,n){var o=this;n=n||{},e=parseFloat(e),(isNaN(e)||e<0||1<e)&&(e=.5);var i=Math.round(127*e);return r.toMIDIChannels(t).forEach((function(e){o.send((r.MIDI_CHANNEL_MESSAGES.channelaftertouch<<4)+(e-1),[i],o._parseTimeParameter(n.time))})),this},i.prototype.sendPitchBend=function(e,t,n){var o=this;if(n=n||{},isNaN(e)||e<-1||1<e)throw new RangeError("Pitch bend value must be between -1 and 1.");var i=Math.round((e+1)/2*16383),a=i>>7&127,s=127&i;return r.toMIDIChannels(t).forEach((function(e){o.send((r.MIDI_CHANNEL_MESSAGES.pitchbend<<4)+(e-1),[s,a],o._parseTimeParameter(n.time))})),this},i.prototype._parseTimeParameter=function(e){var t,n=parseFloat(e);return"string"==typeof e&&"+"===e.substring(0,1)?n&&0<n&&(t=r.time+n):n>r.time&&(t=n),t},i.prototype._convertNoteToArray=function(e){var t=[];return Array.isArray(e)||(e=[e]),e.forEach((function(e){t.push(r.guessNoteNumber(e))})),t},t.exports?t.exports=r:e.WebMidi||(e.WebMidi=r)}(e)})),Ti=t((function(e){!function(t,n,r){if(t){for(var o,i={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},a={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},s={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},c={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},u=1;u<20;++u)i[111+u]="f"+u;for(u=0;u<=9;++u)i[u+96]=u.toString();_.prototype.bind=function(e,t,n){return e=e instanceof Array?e:[e],this._bindMultiple.call(this,e,t,n),this},_.prototype.unbind=function(e,t){return this.bind.call(this,e,(function(){}),t)},_.prototype.trigger=function(e,t){return this._directMap[e+":"+t]&&this._directMap[e+":"+t]({},e),this},_.prototype.reset=function(){return this._callbacks={},this._directMap={},this},_.prototype.stopCallback=function(e,t){if((" "+t.className+" ").indexOf(" mousetrap ")>-1)return!1;if(function e(t,r){return null!==t&&t!==n&&(t===r||e(t.parentNode,r))}(t,this.target))return!1;if("composedPath"in e&&"function"==typeof e.composedPath){var r=e.composedPath()[0];r!==e.target&&(t=r)}return"INPUT"==t.tagName||"SELECT"==t.tagName||"TEXTAREA"==t.tagName||t.isContentEditable},_.prototype.handleKey=function(){var e=this;return e._handleKey.apply(e,arguments)},_.addKeycodes=function(e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t]);o=null},_.init=function(){var e=_(n);for(var t in e)"_"!==t.charAt(0)&&(_[t]=function(t){return function(){return e[t].apply(e,arguments)}}(t))},_.init(),t.Mousetrap=_,e.exports&&(e.exports=_)}function l(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)}function d(e){if("keypress"==e.type){var t=String.fromCharCode(e.which);return e.shiftKey||(t=t.toLowerCase()),t}return i[e.which]?i[e.which]:a[e.which]?a[e.which]:String.fromCharCode(e.which).toLowerCase()}function f(e){return"shift"==e||"ctrl"==e||"alt"==e||"meta"==e}function h(e,t,n){return n||(n=function(){if(!o)for(var e in o={},i)e>95&&e<112||i.hasOwnProperty(e)&&(o[i[e]]=e);return o}()[e]?"keydown":"keypress"),"keypress"==n&&t.length&&(n="keydown"),n}function p(e,t){var n,r,o,i=[];for(n=function(e){return"+"===e?["+"]:(e=e.replace(/\+{2}/g,"+plus")).split("+")}(e),o=0;o<n.length;++o)r=n[o],c[r]&&(r=c[r]),t&&"keypress"!=t&&s[r]&&(r=s[r],i.push("shift")),f(r)&&i.push(r);return{key:r,modifiers:i,action:t=h(r,i,t)}}function _(e){var t=this;if(e=e||n,!(t instanceof _))return new _(e);t.target=e,t._callbacks={},t._directMap={};var r,o={},i=!1,a=!1,s=!1;function c(e){e=e||{};var t,n=!1;for(t in o)e[t]?n=!0:o[t]=0;n||(s=!1)}function u(e,n,r,i,a,s){var c,u,l,d,h=[],p=r.type;if(!t._callbacks[e])return[];for("keyup"==p&&f(e)&&(n=[e]),c=0;c<t._callbacks[e].length;++c)if(u=t._callbacks[e][c],(i||!u.seq||o[u.seq]==u.level)&&p==u.action&&("keypress"==p&&!r.metaKey&&!r.ctrlKey||(l=n,d=u.modifiers,l.sort().join(",")===d.sort().join(",")))){var _=!i&&u.combo==a,m=i&&u.seq==i&&u.level==s;(_||m)&&t._callbacks[e].splice(c,1),h.push(u)}return h}function h(e,n,r,o){t.stopCallback(n,n.target||n.srcElement,r,o)||!1===e(n,r)&&(function(e){e.preventDefault?e.preventDefault():e.returnValue=!1}(n),function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}(n))}function m(e){"number"!=typeof e.which&&(e.which=e.keyCode);var n=d(e);n&&("keyup"!=e.type||i!==n?t.handleKey(n,function(e){var t=[];return e.shiftKey&&t.push("shift"),e.altKey&&t.push("alt"),e.ctrlKey&&t.push("ctrl"),e.metaKey&&t.push("meta"),t}(e),e):i=!1)}function g(e,t,n,a){function u(t){return function(){s=t,++o[e],clearTimeout(r),r=setTimeout(c,1e3)}}function l(t){h(n,t,e),"keyup"!==a&&(i=d(t)),setTimeout(c,10)}o[e]=0;for(var f=0;f<t.length;++f){var _=f+1===t.length?l:u(a||p(t[f+1]).action);v(t[f],_,a,e,f)}}function v(e,n,r,o,i){t._directMap[e+":"+r]=n;var a,s=(e=e.replace(/\s+/g," ")).split(" ");s.length>1?g(e,s,n,r):(a=p(e,r),t._callbacks[a.key]=t._callbacks[a.key]||[],u(a.key,a.modifiers,{type:a.action},o,e,i),t._callbacks[a.key][o?"unshift":"push"]({callback:n,modifiers:a.modifiers,action:a.action,seq:o,level:i,combo:e}))}t._handleKey=function(e,t,n){var r,o=u(e,t,n),i={},l=0,d=!1;for(r=0;r<o.length;++r)o[r].seq&&(l=Math.max(l,o[r].level));for(r=0;r<o.length;++r)if(o[r].seq){if(o[r].level!=l)continue;d=!0,i[o[r].seq]=1,h(o[r].callback,n,o[r].combo,o[r].seq)}else d||h(o[r].callback,n,o[r].combo);var p="keypress"==n.type&&a;n.type!=s||f(e)||p||c(i),a=d&&"keydown"==n.type},t._bindMultiple=function(e,t,n){for(var r=0;r<e.length;++r)v(e[r],t,n)},l(e,"keypress",m),l(e,"keydown",m),l(e,"keyup",m)}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?document:null)})),Ni={"text/plain":"Text","text/html":"Url",default:"Text"};var Oi=function(e,t){var n,r,o,i,a,s,c=!1;t||(t={}),n=t.debug||!1;try{if(o=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,n=[],r=0;r<e.rangeCount;r++)n.push(e.getRangeAt(r));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||n.forEach((function(t){e.addRange(t)})),t&&t.focus()}}(),i=document.createRange(),a=document.getSelection(),(s=document.createElement("span")).textContent=e,s.style.all="unset",s.style.position="fixed",s.style.top=0,s.style.clip="rect(0, 0, 0, 0)",s.style.whiteSpace="pre",s.style.webkitUserSelect="text",s.style.MozUserSelect="text",s.style.msUserSelect="text",s.style.userSelect="text",s.addEventListener("copy",(function(r){if(r.stopPropagation(),t.format)if(r.preventDefault(),void 0===r.clipboardData){n&&console.warn("unable to use e.clipboardData"),n&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var o=Ni[t.format]||Ni.default;window.clipboardData.setData(o,e)}else r.clipboardData.clearData(),r.clipboardData.setData(t.format,e);t.onCopy&&(r.preventDefault(),t.onCopy(r.clipboardData))})),document.body.appendChild(s),i.selectNodeContents(s),a.addRange(i),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");c=!0}catch(o){n&&console.error("unable to copy using execCommand: ",o),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),c=!0}catch(o){n&&console.error("unable to copy using clipboardData: ",o),n&&console.error("falling back to prompt"),r=function(e){var t=(/mac os x/i.test(navigator.userAgent)?"â":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}("message"in t?t.message:"Copy to clipboard: #{key}, Enter"),window.prompt(r,e)}}finally{a&&("function"==typeof a.removeRange?a.removeRange(i):a.removeAllRanges()),s&&document.body.removeChild(s),o()}return c};return function(e){var t=Object.assign({},{enabled:!0,gui:new Mi.GUI,midiPerColor:4,colors:["#ee907b","#2ed9c3","#4888f5","#aa82ff"]},e),n={"Midi Fighter Twister":{sync:function(e,t,n){e.sendControlChange(t,n,1),e.sendControlChange(t,47,6)},clear:function(e,t){e.sendControlChange(t,0,1),e.sendControlChange(t,20,6)},configure:function(){t.connectMidiRange(0,15)}},"nanoKONTROL2 CTRL":{configure:function(){t.connectMidiRange(16,23),t.connectMidiRange(0,7)}}},r=[],o=t.gui,i=[],a={},s=!1,c=!1,u=null,l=null,d=function(){l=new Promise((function(e){navigator.requestMIDIAccess&&(u=Ii).enable((function(t){t?console.error("WebMIDI is not supported in this browser."):(console.log("MIDI devices successfully connected."),y(),e(u))}))})).catch((function(e){console.error(e)}))},f=function(){document.addEventListener("keydown",(function(e){18===e.keyCode&&(s=!0)})),document.addEventListener("keyup",(function(e){18===e.keyCode&&(s=!1)})),document.addEventListener("keyup",(function(e){17===e.keyCode&&t.toggle()}))},h=function(){var e=document.querySelector("body"),t=document.createElement("div");t.classList.add("gui-save"),t.innerHTML='\n      <div class="gui-save__inner">\n        <span class="gui-save__close">&times;</span>\n        <p class="gui-save__clipboard-notification">This code has been saved to your clipboard.</p>\n        <textarea\n          class="gui-save__textarea"\n          name="gui-save-text"\n          id="gui-save-text"\n          autocomplete="off" autocapitalize="off" spellcheck="false"\n        ></textarea>\n      </div>\n    ',e.appendChild(t),e.insertBefore(t,null),e.insertBefore(t,e.childNodes[0]||null)},p=function(){Ti.bind("alt+s",_),Ti.bind("esc",v),document.querySelector(".gui-save__close").addEventListener("click",v)},_=function(){var e=t._getAggregatedSettings();(e=JSON.stringify(e,null,1)).replace(/\\"/g,"ï¿¿"),(e=e.replace(/"([^"]+)":/g,"$1:").replace(/\uFFFF/g,'\\"')).replace(/"/g,"'"),document.querySelector(".gui-save__textarea").value=e,m(),g()},m=function(){document.querySelector(".gui-save").classList.add("is-visible")},g=function(){Oi(document.querySelector(".gui-save__textarea").value);var e=document.querySelector(".gui-save__clipboard-notification");e.classList.add("is-visible"),window.setTimeout((function(){e.classList.remove("is-visible")}),2e3)},v=function(){document.querySelector(".gui-save").classList.remove("is-visible")},b=function(){var e=document.createElement("style");e.type="text/css",e.appendChild(document.createTextNode("\n      .dg.ac {\n        z-index: 9999;\n      }\n\n      .gui-save {\n        display: none;\n        position: fixed;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        left: 0;\n        justify-content: center;\n        align-items: center;\n        box-sizing: border-box;\n        background-color: rgba(255, 255, 255, 0.1);\n        z-index: 999;\n      }\n\n      .gui-save *, .gui-save *:before, .gui-save *:after {\n        box-sizing: inherit;\n      }\n\n      .gui-save.is-visible {\n        display: flex;\n      }\n\n      .gui-save__inner {\n        position: relative;\n        width: 100%;\n        max-width: 400px;\n        margin: 20px;\n      }\n\n      .gui-save__textarea {\n        appearance: none;\n        border-radius: 5px;\n        border: none;\n        background-color: #1f1f1f;\n        width: 100%;\n        height: 300px;\n        padding: 25px 23px;\n        border-left: 4px solid #5887da;\n        font-family: 'Courier New', Courier, 'Lucida Sans Typewriter', 'Lucida Typewriter', monospace;\n        font-size: 14px;\n        line-height: 1.5;\n        font-weight: normal;\n        color: white;\n        transition: border-color 0.2s;\n      }\n\n      .gui-save__textarea:focus {\n        outline: none;\n        border-color: #ee907b;\n      }\n\n      .gui-save__clipboard-notification {\n        font-family: 'Courier New', Courier, 'Lucida Sans Typewriter', 'Lucida Typewriter', monospace;\n        font-size: 13px;\n        pointer-events: none;\n        position: absolute;\n        bottom: -45px;\n        left: 0;\n        right: 0;\n        opacity: 0;\n        color: #5887da;\n        transition: opacity 0.4s;\n      }\n\n      .gui-save__clipboard-notification.is-visible {\n        opacity: 1;\n      }\n\n      .gui-save__close {\n        position: absolute;\n        width: 35px;\n        height: 35px;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        top: 0;\n        right: 0;\n        z-index: 1;\n        font-size: 18px;\n        cursor: pointer;\n        color: #fff;\n      }\n\n      .gui-save__close:active {\n        opacity: 0.7;\n      }\n    ")),document.querySelector("head").appendChild(e)},y=function(){u.inputs.forEach((function(e){e.addListener("midimessage","all",E)}))},E=function(e){var t=bo(e.data,3),n=t[0],r=t[1],o=t[2];s&&console.log("command: ".concat(n," / note: ").concat(r," / velocity: ").concat(o)),S(r,o),w(r,o)},S=function(e,n){var r=i.indexOf(e);if(!(r<0)){var o=t._getNumericControllerAtIndex(r);if(o){var a=o.__min,s=o.__max,c=o.__step,u=c||(s-a)/127,l=t._mapRange(0,127,a,s,n),d=t._snap(u.toFixed(5),l);o.setValue(d)}}},w=function(e,n){a[e]&&a[e].call(t,n)},x=function(){return r.length?r:[t.gui]},A=function(){t.getControllers(!1).forEach((function(e,n){var r=Math.floor(n/t.midiPerColor),o=t.colors[r],i=e.domElement.closest(".cr.number.has-slider");i&&(i.style.borderLeftColor="".concat(o),i.querySelector(".slider-fg").style.backgroundColor="".concat(o))}))};return t._mapRange=function(e,t,n,r,o){return(o-e)*(r-n)/(t-e)+n},t._snap=function(e,t){return Math.round(t/e)*e},t._getNumericControllerAtIndex=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=t.getControllers(n),o=r[e];return void 0!==o&&void 0!==o.min&&void 0!==o.max?o:null},t._getAggregatedSettings=function(){return x().reduce((function(e,t){return e[t.name]=t.__controllers.reduce((function(e,t){return e[t.property]=t.getValue(),e}),{}),e}),{})},t._controllerValueToMidi=function(e){var n=e.getValue(),r=e.__min,o=e.__max,i=t._mapRange(r,o,1,127,n);return Math.round(i)},t.add=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=o.add.apply(o,n);return A(),t.syncMidi(),i},t.addColor=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return o.addColor.apply(o,t)},t.setFolder=function(e){var n=t.gui.addFolder(e);return r.push(n),o=n,n},t.getControllers=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=x(),n=e?t.filter((function(e){return!e.closed})):t;return n.reduce((function(e,t){return e.concat(t.__controllers)}),[])},t.removeFolder=function(e){var n=r.findIndex((function(t){return t.name===e.name}));r.splice(n,1),t.gui.removeFolder(e),o=t.gui},t.connectMidiRange=function(e,t){for(var n=e,r=t+1;n<r;n++)i.push(n)},t.addControl=function(e,t){a[e]=t},t.destroy=function(){t.gui.destroy(),u&&(u.inputs.forEach((function(e){e.removeListener("midimessage","all")})),u.disable())},t.clear=function(){t.gui.destroy(),t.gui=new Mi.GUI,o=t.gui,a={}},t.hide=function(){c=!0,t.gui.hide()},t.show=function(){c=!1,t.gui.show()},t.toggle=function(){(c=!c)?t.hide():t.show()},t.update=function(){t.getControllers().forEach((function(e){e.updateDisplay()}))},t.configureDevice=function(e){var t=n[e];if(!t||!t.configure)return console.warn('No built-in configuration is available for "'.concat(e,'"'));t.configure()},t.syncMidi=function(){u&&i.forEach((function(e,r){var o=t._getNumericControllerAtIndex(r);l.then((function(){u.outputs.forEach((function(r){var i=n[r.name];if(i)if(o){var a=t._controllerValueToMidi(o);i.sync&&i.sync(r,e,a)}else i.clear&&i.clear(r,e)}))}))}))},d(),f(),h(),p(),b(),t}}));
